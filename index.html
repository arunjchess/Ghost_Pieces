<tw-storydata name="Ghost Pieces Free" startnode="1" creator="Twine" creator-version="2.1.3" ifid="F4097D89-487B-4887-BFA9-4964D13FD72B" format="SugarCube" format-version="2.18.0" options="" hidden><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">/***********************************************************************
	BLEACHED - A largely white style for SugarCube v2.17.0+
***********************************************************************/
body {
	color: #111;
	background-color: #fff;
}
a {
	color: #35c;
}
a:hover {
	color: #57e;
}
span.link-disabled {
	color: #777;
}
button {
	color: #111;
	background-color: #acf;
	border-color: #8ad;
}
button:hover {
	background-color: #8ad;
	border-color: #68b;
}
button:disabled {
	background-color: #ccc;
	border-color: #aaa;
}
input, select, textarea {
	color: #111;
	border-color: #ccc;
}
input:focus, select:focus, textarea:focus,
input:hover, select:hover, textarea:hover {
	background-color: #eee;
	border-color: #111;
}
hr {
	border-color: #111;
}

.error {
	background-color: #eaa;
	border-left-color: #d77;
}

#ui-bar {
	background-color: #eee;
	border-color: #ccc;
}
#ui-bar hr {
	border-color: #ccc;
}
#ui-bar-toggle,
#ui-bar-history [id|="history"] {
	color: #111;
	border-color: #ccc;
}
#ui-bar-toggle:hover,
#ui-bar-history [id|="history"]:hover {
	background-color: #ccc;
	border-color: #111;
}
#ui-bar-history [id|="history"]:disabled {
	color: #ccc;
	background-color: transparent;
	border-color: #ccc;
}
#menu ul {
	border-color: #ccc;
}
#menu li:not(:first-child) {
	border-top-color: #ccc;
}
#menu li a {
	color: #111;
}
#menu li a:hover {
	background-color: #ccc;
	border-color: #111;
}

/* Default dialog styling */
#ui-overlay {
	background-color: #777;
}
#ui-dialog-titlebar {
	background-color: #ccc;
}
#ui-dialog-close:hover {
	background-color: #b44;
	border-color: #a33;
}
#ui-dialog-body {
	background-color: #fff;
	border-color: #ccc;
}
#ui-dialog-body hr {
	background-color: #ccc;
}

/* List-based dialog styling */
#ui-dialog-body.list li:not(:first-child) {
	border-top-color: #ccc;
}
#ui-dialog-body.list li a {
	color: #111;
}
#ui-dialog-body.list li a:hover {
	background-color: #ccc;
	border-color: #111;
}

/* Saves dialog styling */
#ui-dialog-body.saves > *:not(:first-child),
#ui-dialog-body.saves tr:not(:first-child) {
	border-top-color: #ccc;
}
#ui-dialog-body.saves .empty {
	color: #777;
}

/* Settings dialog styling */
#ui-dialog-body.settings button[id|="setting-control"] {
	color: #111;
	border-color: #ccc;
}
#ui-dialog-body.settings button[id|="setting-control"]:hover {
	background-color: #eee;
	border-color: #111;
}
#ui-dialog-body.settings button[id|="setting-control"].enabled {
	background-color: #9e9;
	border-color: #7c7;
}
#ui-dialog-body.settings button[id|="setting-control"].enabled:hover {
	background-color: #7c7;
	border-color: #5a5;
}

/* Debug view styling */
html:not([data-debug-view]) #debug-view-toggle {
	color: #111;
	border-color: #ccc;
}
html:not([data-debug-view]) #debug-view-toggle:hover {
	background-color: #eee;
	border-color: #111;
}
html[data-debug-view] #debug-view-toggle {
	background-color: #9e9;
	border-color: #7c7;
}
html[data-debug-view] #debug-view-toggle:hover {
	background-color: #7c7;
	border-color: #5a5;
}
html[data-debug-view] .debug {
	background-color: #dc9;
}
html[data-debug-view] .debug.hidden,
html[data-debug-view] .debug.hidden .debug {
	background-color: #bbb;
}



.time-bar span {
    
    top: 0px;
    background: #ccc;
    height: 2px;
  width: 50px;
  border: 1px solid #000;
    border-radius: 15px;
    display: inline-block;
}
.time-bar .w0 {
    animation: w0 5s linear forwards;
}
.time-bar .w0 {
    width: 1%;
}

@keyframes w0 {
    0% { width: 100%; }
    33% { width: 66%; background: #333 }
    34% { width: 65%; background: red;}
    65% { width: 34%; background: red;}
    100% { width: 1%; }
}

.time-bar .w1 {
    animation: w1 10s linear forwards;
}
.time-bar .w1 {
    width: 1%;
}


@keyframes w1 {
    0% { width: 100%; }
    33% { width: 66%; background: #333 }
    34% { width: 65%; background: red;}
    65% { width: 34%; background: red;}
    100% { width: 1%; }
}

.time-bar .w2 {
    animation: w2 15s linear forwards;
}
.time-bar .w2 {
    width: 1%;
}

@keyframes w2 {
    0% { width: 100%; }
    33% { width: 66%; background: #333 }
    34% { width: 65%; background: red;}
    65% { width: 34%; background: red;}
    100% { width: 1%; }
}

.time-bar .w3 {
    animation: w3 30s linear forwards;
}
.time-bar .w3 {
    width: 1%;
}

@keyframes w3 {
    0% { width: 100%; }
    33% { width: 66%; background: #333 }
    34% { width: 65%; background: red;}
    65% { width: 34%; background: red;}
    100% { width: 1%; }
}

.time-bar .w4 {
    animation: w4 60s linear forwards;
}
.time-bar .w4 {
    width: 1%;
}

@keyframes w4 {
    0% { width: 100%; }
    33% { width: 66%; background: #333 }
    34% { width: 65%; background: red;}
    65% { width: 34%; background: red;}
    100% { width: 1%; }
}


.time-bar .w5 {
    animation: w5 120s linear forwards;
}
.time-bar .w5 {
    width: 1%;
}

@keyframes w5 {
    0% { width: 100%; }
    33% { width: 66%; background: #333 }
    34% { width: 65%; background: red;}
    65% { width: 34%; background: red;}
    100% { width: 1%; }
}






body, tw-story
{
  font-size: 20px;
}


/*!
 * chessboard.js v0.3.0
 *
 * Copyright 2013 Chris Oakman
 * Released under the MIT license
 * https://github.com/oakmac/chessboardjs/blob/master/LICENSE
 *
 * Date: 10 Aug 2013
 */

/* clearfix */
.clearfix-7da63 {
  clear: both;
}

/* board */
.board-b72b1 {
  border: 2px solid #404040;
  -moz-box-sizing: content-box;
  box-sizing: content-box;
}

/* square */
.square-55d63 {
  float: left;
  position: relative;

  /* disable any native browser highlighting */
  -webkit-touch-callout: none;
    -webkit-user-select: none;
     -khtml-user-select: none;
       -moz-user-select: none;
        -ms-user-select: none;
            user-select: none;
}

/* white square */
.white-1e1d7 {
  background-color: #f0d9b5;
  color: #b58863;
}

/* black square */
.black-3c85d {
  background-color: #b58863;
  color: #f0d9b5;
}

/* highlighted square */
.highlight1-32417, .highlight2-9c5d2 {
  -webkit-box-shadow: inset 0 0 3px 3px yellow;
  -moz-box-shadow: inset 0 0 3px 3px yellow;
  box-shadow: inset 0 0 3px 3px yellow;
}

/* notation */
.notation-322f9 {
  cursor: default;
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
  font-size: 14px;
  position: absolute;
}
.alpha-d2270 {
  bottom: 1px;
  right: 3px;
}
.numeric-fc462 {
  top: 2px;
  left: 2px;
}



/* define a fixed width for the entire menu */
.navigation {
  width: 300px;
  text-align:justify;
}

/* reset our lists to remove bullet points and padding */
.mainmenu, .submenu {
  list-style: none;
  padding: 0;
  margin: 0;
}

/* make ALL links (main and submenu) have padding and background color */
.mainmenu a {
  display: block;
  background-color: #FFF;
  text-decoration: none;
  padding: 10px;
  color: #000;
}

/* add hover behaviour */
.mainmenu a:hover {
    background-color: #CCFFCC;
}
















































































</style><script role="script" id="twine-user-script" type="text/twine-javascript">macros['googleForms'] =
{
handler: function (place, macroName, params, parser)
{
/*Enter the ID of the first Google Forms text input field here.*/
var a = place.querySelector("#entry_816981504");
a.value = eval(Wikifier.parse(params[0]));
/*Enter the ID of the second Google Forms text input field here.*/
var b = place.querySelector("#entry_223958687");
b.value = eval(Wikifier.parse(params[1]));
}
};

$('#ui-bar').remove();
$(document.head).find('#style-ui-bar').remove();

/*!
 * chessboard.js v0.3.0
 *
 * Copyright 2013 Chris Oakman
 * Released under the MIT license
 * http://chessboardjs.com/license
 *
 * Date: 10 Aug 2013
 */

// start anonymous scope
;(function() {
'use strict';

//------------------------------------------------------------------------------
// Chess Util Functions
//------------------------------------------------------------------------------
var COLUMNS = 'abcdefgh'.split('');

function validMove(move) {
  // move should be a string
  if (typeof move !== 'string') return false;

  // move should be in the form of "e2-e4", "f6-d5"
  var tmp = move.split('-');
  if (tmp.length !== 2) return false;

  return (validSquare(tmp[0]) === true && validSquare(tmp[1]) === true);
}

function validSquare(square) {
  if (typeof square !== 'string') return false;
  return (square.search(/^[a-h][1-8]$/) !== -1);
}

function validPieceCode(code) {
  if (typeof code !== 'string') return false;
  return (code.search(/^[bw][KQRNBPX]$/) !== -1);
}

// TODO: this whole function could probably be replaced with a single regex
function validFen(fen) {
  if (typeof fen !== 'string') return false;

  // cut off any move, castling, etc info from the end
  // we're only interested in position information
  fen = fen.replace(/ .+$/, '');

  // FEN should be 8 sections separated by slashes
  var chunks = fen.split('/');
  if (chunks.length !== 8) return false;

  // check the piece sections
  for (var i = 0; i < 8; i++) {
    if (chunks[i] === '' ||
        chunks[i].length > 8 ||
        chunks[i].search(/[^kqrbnpxKQRNBPX1-8]/) !== -1) {
      return false;
    }
  }

  return true;
}

function validPositionObject(pos) {
  if (typeof pos !== 'object') return false;

  for (var i in pos) {
    if (pos.hasOwnProperty(i) !== true) continue;

    if (validSquare(i) !== true || validPieceCode(pos[i]) !== true) {
      return false;
    }
  }

  return true;
}

// convert FEN piece code to bP, wK, etc
function fenToPieceCode(piece) {
  // black piece
  if (piece.toLowerCase() === piece) {
    return 'b' + piece.toUpperCase();
  }

  // white piece
  return 'w' + piece.toUpperCase();
}

// convert bP, wK, etc code to FEN structure
function pieceCodeToFen(piece) {
  var tmp = piece.split('');

  // white piece
  if (tmp[0] === 'w') {
    return tmp[1].toUpperCase();
  }

  // black piece
  return tmp[1].toLowerCase();
}

// convert FEN string to position object
// returns false if the FEN string is invalid
function fenToObj(fen) {
  if (validFen(fen) !== true) {
    return false;
  }

  // cut off any move, castling, etc info from the end
  // we're only interested in position information
  fen = fen.replace(/ .+$/, '');

  var rows = fen.split('/');
  var position = {};

  var currentRow = 8;
  for (var i = 0; i < 8; i++) {
    var row = rows[i].split('');
    var colIndex = 0;

    // loop through each character in the FEN section
    for (var j = 0; j < row.length; j++) {
      // number / empty squares
      if (row[j].search(/[1-8]/) !== -1) {
        var emptySquares = parseInt(row[j], 10);
        colIndex += emptySquares;
      }
      // piece
      else {
        var square = COLUMNS[colIndex] + currentRow;
        position[square] = fenToPieceCode(row[j]);
        colIndex++;
      }
    }

    currentRow--;
  }

  return position;
}

// position object to FEN string
// returns false if the obj is not a valid position object
function objToFen(obj) {
  if (validPositionObject(obj) !== true) {
    return false;
  }

  var fen = '';

  var currentRow = 8;
  for (var i = 0; i < 8; i++) {
    for (var j = 0; j < 8; j++) {
      var square = COLUMNS[j] + currentRow;

      // piece exists
      if (obj.hasOwnProperty(square) === true) {
        fen += pieceCodeToFen(obj[square]);
      }

      // empty space
      else {
        fen += '1';
      }
    }

    if (i !== 7) {
      fen += '/';
    }

    currentRow--;
  }

  // squeeze the numbers together
  // haha, I love this solution...
  fen = fen.replace(/11111111/g, '8');
  fen = fen.replace(/1111111/g, '7');
  fen = fen.replace(/111111/g, '6');
  fen = fen.replace(/11111/g, '5');
  fen = fen.replace(/1111/g, '4');
  fen = fen.replace(/111/g, '3');
  fen = fen.replace(/11/g, '2');

  return fen;
}

window['ChessBoard'] = window['ChessBoard'] || function(containerElOrId, cfg) {
'use strict';

cfg = cfg || {};

//------------------------------------------------------------------------------
// Constants
//------------------------------------------------------------------------------

var MINIMUM_JQUERY_VERSION = '1.7.0',
  START_FEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR',
  START_POSITION = fenToObj(START_FEN);

// use unique class names to prevent clashing with anything else on the page
// and simplify selectors
var CSS = {
  alpha: 'alpha-d2270',
  black: 'black-3c85d',
  board: 'board-b72b1',
  chessboard: 'chessboard-63f37',
  clearfix: 'clearfix-7da63',
  highlight1: 'highlight1-32417',
  highlight2: 'highlight2-9c5d2',
  notation: 'notation-322f9',
  numeric: 'numeric-fc462',
  piece: 'piece-417db',
  row: 'row-5277c',
  sparePieces: 'spare-pieces-7492f',
  sparePiecesBottom: 'spare-pieces-bottom-ae20f',
  sparePiecesTop: 'spare-pieces-top-4028b',
  square: 'square-55d63',
  white: 'white-1e1d7'
};

//------------------------------------------------------------------------------
// Module Scope Variables
//------------------------------------------------------------------------------

// DOM elements
var containerEl,
  boardEl,
  draggedPieceEl,
  sparePiecesTopEl,
  sparePiecesBottomEl;

// constructor return object
var widget = {};

//------------------------------------------------------------------------------
// Stateful
//------------------------------------------------------------------------------

var ANIMATION_HAPPENING = false,
  BOARD_BORDER_SIZE = 2,
  CURRENT_ORIENTATION = 'white',
  CURRENT_POSITION = {},
  SQUARE_SIZE,
  DRAGGED_PIECE,
  DRAGGED_PIECE_LOCATION,
  DRAGGED_PIECE_SOURCE,
  DRAGGING_A_PIECE = false,
  SPARE_PIECE_ELS_IDS = {},
  SQUARE_ELS_IDS = {},
  SQUARE_ELS_OFFSETS;

//------------------------------------------------------------------------------
// JS Util Functions
//------------------------------------------------------------------------------

// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript
function createId() {
  return 'xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx-xxxx'.replace(/x/g, function(c) {
    var r = Math.random() * 16 | 0;
    return r.toString(16);
  });
}

function deepCopy(thing) {
  return JSON.parse(JSON.stringify(thing));
}

function parseSemVer(version) {
  var tmp = version.split('.');
  return {
    major: parseInt(tmp[0], 10),
    minor: parseInt(tmp[1], 10),
    patch: parseInt(tmp[2], 10)
  };
}

// returns true if version is >= minimum
function compareSemVer(version, minimum) {
  version = parseSemVer(version);
  minimum = parseSemVer(minimum);

  var versionNum = (version.major * 10000 * 10000) +
    (version.minor * 10000) + version.patch;
  var minimumNum = (minimum.major * 10000 * 10000) +
    (minimum.minor * 10000) + minimum.patch;

  return (versionNum >= minimumNum);
}

//------------------------------------------------------------------------------
// Validation / Errors
//------------------------------------------------------------------------------

function error(code, msg, obj) {
  // do nothing if showErrors is not set
  if (cfg.hasOwnProperty('showErrors') !== true ||
      cfg.showErrors === false) {
    return;
  }

  var errorText = 'ChessBoard Error ' + code + ': ' + msg;

  // print to console
  if (cfg.showErrors === 'console' &&
      typeof console === 'object' &&
      typeof console.log === 'function') {
    console.log(errorText);
    if (arguments.length >= 2) {
      console.log(obj);
    }
    return;
  }

  // alert errors
  if (cfg.showErrors === 'alert') {
    if (obj) {
      errorText += '\n\n' + JSON.stringify(obj);
    }
    window.alert(errorText);
    return;
  }

  // custom function
  if (typeof cfg.showErrors === 'function') {
    cfg.showErrors(code, msg, obj);
  }
}

// check dependencies
function checkDeps() {
  // if containerId is a string, it must be the ID of a DOM node
  if (typeof containerElOrId === 'string') {
    // cannot be empty
    if (containerElOrId === '') {
      window.alert('ChessBoard Error 1001: ' +
        'The first argument to ChessBoard() cannot be an empty string.' +
        '\n\nExiting...');
      return false;
    }

    // make sure the container element exists in the DOM
    var el = document.getElementById(containerElOrId);
    if (! el) {
      window.alert('ChessBoard Error 1002: Element with id "' +
        containerElOrId + '" does not exist in the DOM.' +
        '\n\nExiting...');
      return false;
    }

    // set the containerEl
    containerEl = $(el);
  }

  // else it must be something that becomes a jQuery collection
  // with size 1
  // ie: a single DOM node or jQuery object
  else {
    containerEl = $(containerElOrId);

    if (containerEl.length !== 1) {
      window.alert('ChessBoard Error 1003: The first argument to ' +
        'ChessBoard() must be an ID or a single DOM node.' +
        '\n\nExiting...');
      return false;
    }
  }

  // JSON must exist
  if (! window.JSON ||
      typeof JSON.stringify !== 'function' ||
      typeof JSON.parse !== 'function') {
    window.alert('ChessBoard Error 1004: JSON does not exist. ' +
      'Please include a JSON polyfill.\n\nExiting...');
    return false;
  }

  // check for a compatible version of jQuery
  if (! (typeof window.$ && $.fn && $.fn.jquery &&
      compareSemVer($.fn.jquery, MINIMUM_JQUERY_VERSION) === true)) {
    window.alert('ChessBoard Error 1005: Unable to find a valid version ' +
      'of jQuery. Please include jQuery ' + MINIMUM_JQUERY_VERSION + ' or ' +
      'higher on the page.\n\nExiting...');
    return false;
  }

  return true;
}

function validAnimationSpeed(speed) {
  if (speed === 'fast' || speed === 'slow') {
    return true;
  }

  if ((parseInt(speed, 10) + '') !== (speed + '')) {
    return false;
  }

  return (speed >= 0);
}

// validate config / set default options
function expandConfig() {
  if (typeof cfg === 'string' || validPositionObject(cfg) === true) {
    cfg = {
      position: cfg
    };
  }

  // default for orientation is white
  if (cfg.orientation !== 'black') {
    cfg.orientation = 'white';
  }
  CURRENT_ORIENTATION = cfg.orientation;

  // default for showNotation is true
  if (cfg.showNotation !== false) {
    cfg.showNotation = true;
  }

  // default for draggable is false
  if (cfg.draggable !== true) {
    cfg.draggable = false;
  }

  // default for dropOffBoard is 'snapback'
  if (cfg.dropOffBoard !== 'trash') {
    cfg.dropOffBoard = 'snapback';
  }

  // default for sparePieces is false
  if (cfg.sparePieces !== true) {
    cfg.sparePieces = false;
  }

  // draggable must be true if sparePieces is enabled
  if (cfg.sparePieces === true) {
    cfg.draggable = true;
  }

  // default piece theme is wikipedia
  if (cfg.hasOwnProperty('pieceTheme') !== true ||
      (typeof cfg.pieceTheme !== 'string' &&
       typeof cfg.pieceTheme !== 'function')) {
    cfg.pieceTheme = 'img/chesspieces/wikipedia/{piece}.png';
  }

  // animation speeds
  if (cfg.hasOwnProperty('appearSpeed') !== true ||
      validAnimationSpeed(cfg.appearSpeed) !== true) {
    cfg.appearSpeed = 200;
  }
  if (cfg.hasOwnProperty('moveSpeed') !== true ||
      validAnimationSpeed(cfg.moveSpeed) !== true) {
    cfg.moveSpeed = 200;
  }
  if (cfg.hasOwnProperty('snapbackSpeed') !== true ||
      validAnimationSpeed(cfg.snapbackSpeed) !== true) {
    cfg.snapbackSpeed = 50;
  }
  if (cfg.hasOwnProperty('snapSpeed') !== true ||
      validAnimationSpeed(cfg.snapSpeed) !== true) {
    cfg.snapSpeed = 25;
  }
  if (cfg.hasOwnProperty('trashSpeed') !== true ||
      validAnimationSpeed(cfg.trashSpeed) !== true) {
    cfg.trashSpeed = 100;
  }

  // make sure position is valid
  if (cfg.hasOwnProperty('position') === true) {
    if (cfg.position === 'start') {
      CURRENT_POSITION = deepCopy(START_POSITION);
    }

    else if (validFen(cfg.position) === true) {
      CURRENT_POSITION = fenToObj(cfg.position);
    }

    else if (validPositionObject(cfg.position) === true) {
      CURRENT_POSITION = deepCopy(cfg.position);
    }

    else {
      error(7263, 'Invalid value passed to config.position.', cfg.position);
    }
  }

  return true;
}

//------------------------------------------------------------------------------
// DOM Misc
//------------------------------------------------------------------------------

// calculates square size based on the width of the container
// got a little CSS black magic here, so let me explain:
// get the width of the container element (could be anything), reduce by 1 for
// fudge factor, and then keep reducing until we find an exact mod 8 for
// our square size
function calculateSquareSize() {
  var containerWidth = parseInt(containerEl.css('width'), 10);

  // defensive, prevent infinite loop
  if (! containerWidth || containerWidth <= 0) {
    return 0;
  }

  // pad one pixel
  var boardWidth = containerWidth - 1;

  while (boardWidth % 8 !== 0 && boardWidth > 0) {
    boardWidth--;
  }

  return (boardWidth / 8);
}

// create random IDs for elements
function createElIds() {
  // squares on the board
  for (var i = 0; i < COLUMNS.length; i++) {
    for (var j = 1; j <= 8; j++) {
      var square = COLUMNS[i] + j;
      SQUARE_ELS_IDS[square] = square + '-' + createId();
    }
  }

  // spare pieces
  var pieces = 'KQRBNP'.split('');
  for (var i = 0; i < pieces.length; i++) {
    var whitePiece = 'w' + pieces[i];
    var blackPiece = 'b' + pieces[i];
    SPARE_PIECE_ELS_IDS[whitePiece] = whitePiece + '-' + createId();
    SPARE_PIECE_ELS_IDS[blackPiece] = blackPiece + '-' + createId();
  }
}

//------------------------------------------------------------------------------
// Markup Building
//------------------------------------------------------------------------------

function buildBoardContainer() {
  var html = '<div class="' + CSS.chessboard + '">';

  if (cfg.sparePieces === true) {
    html += '<div class="' + CSS.sparePieces + ' ' +
      CSS.sparePiecesTop + '"></div>';
  }

  html += '<div class="' + CSS.board + '"></div>';

  if (cfg.sparePieces === true) {
    html += '<div class="' + CSS.sparePieces + ' ' +
      CSS.sparePiecesBottom + '"></div>';
  }

  html += '</div>';

  return html;
}

/*
var buildSquare = function(color, size, id) {
  var html = '<div class="' + CSS.square + ' ' + CSS[color] + '" ' +
  'style="width: ' + size + 'px; height: ' + size + 'px" ' +
  'id="' + id + '">';

  if (cfg.showNotation === true) {

  }

  html += '</div>';

  return html;
};
*/

function buildBoard(orientation) {
  if (orientation !== 'black') {
    orientation = 'white';
  }

  var html = '';

  // algebraic notation / orientation
  var alpha = deepCopy(COLUMNS);
  var row = 8;
  if (orientation === 'black') {
    alpha.reverse();
    row = 1;
  }

  var squareColor = 'white';
  for (var i = 0; i < 8; i++) {
    html += '<div class="' + CSS.row + '">';
    for (var j = 0; j < 8; j++) {
      var square = alpha[j] + row;

      html += '<div class="' + CSS.square + ' ' + CSS[squareColor] + ' ' +
        'square-' + square + '" ' +
        'style="width: ' + SQUARE_SIZE + 'px; height: ' + SQUARE_SIZE + 'px" ' +
        'id="' + SQUARE_ELS_IDS[square] + '" ' +
        'data-square="' + square + '">';

      if (cfg.showNotation === true) {
        // alpha notation
        if ((orientation === 'white' && row === 1) ||
            (orientation === 'black' && row === 8)) {
          html += '<div class="' + CSS.notation + ' ' + CSS.alpha + '">' +
            alpha[j] + '</div>';
        }

        // numeric notation
        if (j === 0) {
          html += '<div class="' + CSS.notation + ' ' + CSS.numeric + '">' +
            row + '</div>';
        }
      }

      html += '</div>'; // end .square

      squareColor = (squareColor === 'white' ? 'black' : 'white');
    }
    html += '<div class="' + CSS.clearfix + '"></div></div>';

    squareColor = (squareColor === 'white' ? 'black' : 'white');

    if (orientation === 'white') {
      row--;
    }
    else {
      row++;
    }
  }

  return html;
}

function buildPieceImgSrc(piece) {
  if (typeof cfg.pieceTheme === 'function') {
    return cfg.pieceTheme(piece);
  }

  if (typeof cfg.pieceTheme === 'string') {
    return cfg.pieceTheme.replace(/{piece}/g, piece);
  }

  // NOTE: this should never happen
  error(8272, 'Unable to build image source for cfg.pieceTheme.');
  return '';
}

function buildPiece(piece, hidden, id) {
  var html = '<img src="' + buildPieceImgSrc(piece) + '" ';
  if (id && typeof id === 'string') {
    html += 'id="' + id + '" ';
  }
  html += 'alt="" ' +
  'class="' + CSS.piece + '" ' +
  'data-piece="' + piece + '" ' +
  'style="width: ' + SQUARE_SIZE + 'px;' +
  'height: ' + SQUARE_SIZE + 'px;';
  if (hidden === true) {
    html += 'display:none;';
  }
  html += '" />';

  return html;
}

function buildSparePieces(color) {
  var pieces = ['wK', 'wQ', 'wR', 'wB', 'wN', 'wP'];
  if (color === 'black') {
    pieces = ['bK', 'bQ', 'bR', 'bB', 'bN', 'bP'];
  }

  var html = '';
  for (var i = 0; i < pieces.length; i++) {
    html += buildPiece(pieces[i], false, SPARE_PIECE_ELS_IDS[pieces[i]]);
  }

  return html;
}

//------------------------------------------------------------------------------
// Animations
//------------------------------------------------------------------------------

function animateSquareToSquare(src, dest, piece, completeFn) {
  // get information about the source and destination squares
  var srcSquareEl = $('#' + SQUARE_ELS_IDS[src]);
  var srcSquarePosition = srcSquareEl.offset();
  var destSquareEl = $('#' + SQUARE_ELS_IDS[dest]);
  var destSquarePosition = destSquareEl.offset();

  // create the animated piece and absolutely position it
  // over the source square
  var animatedPieceId = createId();
  $('body').append(buildPiece(piece, true, animatedPieceId));
  var animatedPieceEl = $('#' + animatedPieceId);
  animatedPieceEl.css({
    display: '',
    position: 'absolute',
    top: srcSquarePosition.top,
    left: srcSquarePosition.left
  });

  // remove original piece from source square
  srcSquareEl.find('.' + CSS.piece).remove();

  // on complete
  var complete = function() {
    // add the "real" piece to the destination square
    destSquareEl.append(buildPiece(piece));

    // remove the animated piece
    animatedPieceEl.remove();

    // run complete function
    if (typeof completeFn === 'function') {
      completeFn();
    }
  };

  // animate the piece to the destination square
  var opts = {
    duration: cfg.moveSpeed,
    complete: complete
  };
  animatedPieceEl.animate(destSquarePosition, opts);
}

function animateSparePieceToSquare(piece, dest, completeFn) {
  var srcOffset = $('#' + SPARE_PIECE_ELS_IDS[piece]).offset();
  var destSquareEl = $('#' + SQUARE_ELS_IDS[dest]);
  var destOffset = destSquareEl.offset();

  // create the animate piece
  var pieceId = createId();
  $('body').append(buildPiece(piece, true, pieceId));
  var animatedPieceEl = $('#' + pieceId);
  animatedPieceEl.css({
    display: '',
    position: 'absolute',
    left: srcOffset.left,
    top: srcOffset.top
  });

  // on complete
  var complete = function() {
    // add the "real" piece to the destination square
    destSquareEl.find('.' + CSS.piece).remove();
    destSquareEl.append(buildPiece(piece));

    // remove the animated piece
    animatedPieceEl.remove();

    // run complete function
    if (typeof completeFn === 'function') {
      completeFn();
    }
  };

  // animate the piece to the destination square
  var opts = {
    duration: cfg.moveSpeed,
    complete: complete
  };
  animatedPieceEl.animate(destOffset, opts);
}

// execute an array of animations
function doAnimations(a, oldPos, newPos) {
  ANIMATION_HAPPENING = true;

  var numFinished = 0;
  function onFinish() {
    numFinished++;

    // exit if all the animations aren't finished
    if (numFinished !== a.length) return;

    drawPositionInstant();
    ANIMATION_HAPPENING = false;

    // run their onMoveEnd function
    if (cfg.hasOwnProperty('onMoveEnd') === true &&
      typeof cfg.onMoveEnd === 'function') {
      cfg.onMoveEnd(deepCopy(oldPos), deepCopy(newPos));
    }
  }

  for (var i = 0; i < a.length; i++) {
    // clear a piece
    if (a[i].type === 'clear') {
      $('#' + SQUARE_ELS_IDS[a[i].square] + ' .' + CSS.piece)
        .fadeOut(cfg.trashSpeed, onFinish);
    }

    // add a piece (no spare pieces)
    if (a[i].type === 'add' && cfg.sparePieces !== true) {
      $('#' + SQUARE_ELS_IDS[a[i].square])
        .append(buildPiece(a[i].piece, true))
        .find('.' + CSS.piece)
        .fadeIn(cfg.appearSpeed, onFinish);
    }

    // add a piece from a spare piece
    if (a[i].type === 'add' && cfg.sparePieces === true) {
      animateSparePieceToSquare(a[i].piece, a[i].square, onFinish);
    }

    // move a piece
    if (a[i].type === 'move') {
      animateSquareToSquare(a[i].source, a[i].destination, a[i].piece,
        onFinish);
    }
  }
}

// returns the distance between two squares
function squareDistance(s1, s2) {
  s1 = s1.split('');
  var s1x = COLUMNS.indexOf(s1[0]) + 1;
  var s1y = parseInt(s1[1], 10);

  s2 = s2.split('');
  var s2x = COLUMNS.indexOf(s2[0]) + 1;
  var s2y = parseInt(s2[1], 10);

  var xDelta = Math.abs(s1x - s2x);
  var yDelta = Math.abs(s1y - s2y);

  if (xDelta >= yDelta) return xDelta;
  return yDelta;
}

// returns an array of closest squares from square
function createRadius(square) {
  var squares = [];

  // calculate distance of all squares
  for (var i = 0; i < 8; i++) {
    for (var j = 0; j < 8; j++) {
      var s = COLUMNS[i] + (j + 1);

      // skip the square we're starting from
      if (square === s) continue;

      squares.push({
        square: s,
        distance: squareDistance(square, s)
      });
    }
  }

  // sort by distance
  squares.sort(function(a, b) {
    return a.distance - b.distance;
  });

  // just return the square code
  var squares2 = [];
  for (var i = 0; i < squares.length; i++) {
    squares2.push(squares[i].square);
  }

  return squares2;
}

// returns the square of the closest instance of piece
// returns false if no instance of piece is found in position
function findClosestPiece(position, piece, square) {
  // create array of closest squares from square
  var closestSquares = createRadius(square);

  // search through the position in order of distance for the piece
  for (var i = 0; i < closestSquares.length; i++) {
    var s = closestSquares[i];

    if (position.hasOwnProperty(s) === true && position[s] === piece) {
      return s;
    }
  }

  return false;
}

// calculate an array of animations that need to happen in order to get
// from pos1 to pos2
function calculateAnimations(pos1, pos2) {
  // make copies of both
  pos1 = deepCopy(pos1);
  pos2 = deepCopy(pos2);

  var animations = [];
  var squaresMovedTo = {};

  // remove pieces that are the same in both positions
  for (var i in pos2) {
    if (pos2.hasOwnProperty(i) !== true) continue;

    if (pos1.hasOwnProperty(i) === true && pos1[i] === pos2[i]) {
      delete pos1[i];
      delete pos2[i];
    }
  }

  // find all the "move" animations
  for (var i in pos2) {
    if (pos2.hasOwnProperty(i) !== true) continue;

    var closestPiece = findClosestPiece(pos1, pos2[i], i);
    if (closestPiece !== false) {
      animations.push({
        type: 'move',
        source: closestPiece,
        destination: i,
        piece: pos2[i]
      });

      delete pos1[closestPiece];
      delete pos2[i];
      squaresMovedTo[i] = true;
    }
  }

  // add pieces to pos2
  for (var i in pos2) {
    if (pos2.hasOwnProperty(i) !== true) continue;

    animations.push({
      type: 'add',
      square: i,
      piece: pos2[i]
    })

    delete pos2[i];
  }

  // clear pieces from pos1
  for (var i in pos1) {
    if (pos1.hasOwnProperty(i) !== true) continue;

    // do not clear a piece if it is on a square that is the result
    // of a "move", ie: a piece capture
    if (squaresMovedTo.hasOwnProperty(i) === true) continue;

    animations.push({
      type: 'clear',
      square: i,
      piece: pos1[i]
    });

    delete pos1[i];
  }

  return animations;
}

//------------------------------------------------------------------------------
// Control Flow
//------------------------------------------------------------------------------

function drawPositionInstant() {
  // clear the board
  boardEl.find('.' + CSS.piece).remove();

  // add the pieces
  for (var i in CURRENT_POSITION) {
    if (CURRENT_POSITION.hasOwnProperty(i) !== true) continue;

    $('#' + SQUARE_ELS_IDS[i]).append(buildPiece(CURRENT_POSITION[i]));
  }
}

function drawBoard() {
  boardEl.html(buildBoard(CURRENT_ORIENTATION));
  drawPositionInstant();

  if (cfg.sparePieces === true) {
    if (CURRENT_ORIENTATION === 'white') {
      sparePiecesTopEl.html(buildSparePieces('black'));
      sparePiecesBottomEl.html(buildSparePieces('white'));
    }
    else {
      sparePiecesTopEl.html(buildSparePieces('white'));
      sparePiecesBottomEl.html(buildSparePieces('black'));
    }
  }
}

// given a position and a set of moves, return a new position
// with the moves executed
function calculatePositionFromMoves(position, moves) {
  position = deepCopy(position);

  for (var i in moves) {
    if (moves.hasOwnProperty(i) !== true) continue;

    // skip the move if the position doesn't have a piece on the source square
    if (position.hasOwnProperty(i) !== true) continue;

    var piece = position[i];
    delete position[i];
    position[moves[i]] = piece;
  }

  return position;
}

function setCurrentPosition(position) {
  var oldPos = deepCopy(CURRENT_POSITION);
  var newPos = deepCopy(position);
  var oldFen = objToFen(oldPos);
  var newFen = objToFen(newPos);

  // do nothing if no change in position
  if (oldFen === newFen) return;

  // run their onChange function
  if (cfg.hasOwnProperty('onChange') === true &&
    typeof cfg.onChange === 'function') {
    cfg.onChange(oldPos, newPos);
  }

  // update state
  CURRENT_POSITION = position;
}

function isXYOnSquare(x, y) {
  for (var i in SQUARE_ELS_OFFSETS) {
    if (SQUARE_ELS_OFFSETS.hasOwnProperty(i) !== true) continue;

    var s = SQUARE_ELS_OFFSETS[i];
    if (x >= s.left && x < s.left + SQUARE_SIZE &&
        y >= s.top && y < s.top + SQUARE_SIZE) {
      return i;
    }
  }

  return 'offboard';
}

// records the XY coords of every square into memory
function captureSquareOffsets() {
  SQUARE_ELS_OFFSETS = {};

  for (var i in SQUARE_ELS_IDS) {
    if (SQUARE_ELS_IDS.hasOwnProperty(i) !== true) continue;

    SQUARE_ELS_OFFSETS[i] = $('#' + SQUARE_ELS_IDS[i]).offset();
  }
}

function removeSquareHighlights() {
  boardEl.find('.' + CSS.square)
    .removeClass(CSS.highlight1 + ' ' + CSS.highlight2);
}

function snapbackDraggedPiece() {
  // there is no "snapback" for spare pieces
  if (DRAGGED_PIECE_SOURCE === 'spare') {
    trashDraggedPiece();
    return;
  }

  removeSquareHighlights();

  // animation complete
  function complete() {
    drawPositionInstant();
    draggedPieceEl.css('display', 'none');

    // run their onSnapbackEnd function
    if (cfg.hasOwnProperty('onSnapbackEnd') === true &&
      typeof cfg.onSnapbackEnd === 'function') {
      cfg.onSnapbackEnd(DRAGGED_PIECE, DRAGGED_PIECE_SOURCE,
        deepCopy(CURRENT_POSITION), CURRENT_ORIENTATION);
    }
  }

  // get source square position
  var sourceSquarePosition =
    $('#' + SQUARE_ELS_IDS[DRAGGED_PIECE_SOURCE]).offset();

  // animate the piece to the target square
  var opts = {
    duration: cfg.snapbackSpeed,
    complete: complete
  };
  draggedPieceEl.animate(sourceSquarePosition, opts);

  // set state
  DRAGGING_A_PIECE = false;
}

function trashDraggedPiece() {
  removeSquareHighlights();

  // remove the source piece
  var newPosition = deepCopy(CURRENT_POSITION);
  delete newPosition[DRAGGED_PIECE_SOURCE];
  setCurrentPosition(newPosition);

  // redraw the position
  drawPositionInstant();

  // hide the dragged piece
  draggedPieceEl.fadeOut(cfg.trashSpeed);

  // set state
  DRAGGING_A_PIECE = false;
}

function dropDraggedPieceOnSquare(square) {
  removeSquareHighlights();

  // update position
  var newPosition = deepCopy(CURRENT_POSITION);
  delete newPosition[DRAGGED_PIECE_SOURCE];
  newPosition[square] = DRAGGED_PIECE;
  setCurrentPosition(newPosition);

  // get target square information
  var targetSquarePosition = $('#' + SQUARE_ELS_IDS[square]).offset();

  // animation complete
  var complete = function() {
    drawPositionInstant();
    draggedPieceEl.css('display', 'none');

    // execute their onSnapEnd function
    if (cfg.hasOwnProperty('onSnapEnd') === true &&
      typeof cfg.onSnapEnd === 'function') {
      cfg.onSnapEnd(DRAGGED_PIECE_SOURCE, square, DRAGGED_PIECE);
    }
  };

  // snap the piece to the target square
  var opts = {
    duration: cfg.snapSpeed,
    complete: complete
  };
  draggedPieceEl.animate(targetSquarePosition, opts);

  // set state
  DRAGGING_A_PIECE = false;
}

function beginDraggingPiece(source, piece, x, y) {
  // run their custom onDragStart function
  // their custom onDragStart function can cancel drag start
  if (typeof cfg.onDragStart === 'function' &&
      cfg.onDragStart(source, piece,
        deepCopy(CURRENT_POSITION), CURRENT_ORIENTATION) === false) {
    return;
  }

  // set state
  DRAGGING_A_PIECE = true;
  DRAGGED_PIECE = piece;
  DRAGGED_PIECE_SOURCE = source;

  // if the piece came from spare pieces, location is offboard
  if (source === 'spare') {
    DRAGGED_PIECE_LOCATION = 'offboard';
  }
  else {
    DRAGGED_PIECE_LOCATION = source;
  }

  // capture the x, y coords of all squares in memory
  captureSquareOffsets();

  // create the dragged piece
  draggedPieceEl.attr('src', buildPieceImgSrc(piece))
    .css({
      display: '',
      position: 'absolute',
      left: x - (SQUARE_SIZE / 2),
      top: y - (SQUARE_SIZE / 2)
    });

  if (source !== 'spare') {
    // highlight the source square and hide the piece
    $('#' + SQUARE_ELS_IDS[source]).addClass(CSS.highlight1)
      .find('.' + CSS.piece).css('display', 'none');
  }
}

function updateDraggedPiece(x, y) {
  // put the dragged piece over the mouse cursor
  draggedPieceEl.css({
    left: x - (SQUARE_SIZE / 2),
    top: y - (SQUARE_SIZE / 2)
  });

  // get location
  var location = isXYOnSquare(x, y);

  // do nothing if the location has not changed
  if (location === DRAGGED_PIECE_LOCATION) return;

  // remove highlight from previous square
  if (validSquare(DRAGGED_PIECE_LOCATION) === true) {
    $('#' + SQUARE_ELS_IDS[DRAGGED_PIECE_LOCATION])
      .removeClass(CSS.highlight2);
  }

  // add highlight to new square
  if (validSquare(location) === true) {
    $('#' + SQUARE_ELS_IDS[location]).addClass(CSS.highlight2);
  }

  // run onDragMove
  if (typeof cfg.onDragMove === 'function') {
    cfg.onDragMove(location, DRAGGED_PIECE_LOCATION,
      DRAGGED_PIECE_SOURCE, DRAGGED_PIECE,
      deepCopy(CURRENT_POSITION), CURRENT_ORIENTATION);
  }

  // update state
  DRAGGED_PIECE_LOCATION = location;
}

function stopDraggedPiece(location) {
  // determine what the action should be
  var action = 'drop';
  if (location === 'offboard' && cfg.dropOffBoard === 'snapback') {
    action = 'snapback';
  }
  if (location === 'offboard' && cfg.dropOffBoard === 'trash') {
    action = 'trash';
  }

  // run their onDrop function, which can potentially change the drop action
  if (cfg.hasOwnProperty('onDrop') === true &&
    typeof cfg.onDrop === 'function') {
    var newPosition = deepCopy(CURRENT_POSITION);

    // source piece is a spare piece and position is off the board
    //if (DRAGGED_PIECE_SOURCE === 'spare' && location === 'offboard') {...}
    // position has not changed; do nothing

    // source piece is a spare piece and position is on the board
    if (DRAGGED_PIECE_SOURCE === 'spare' && validSquare(location) === true) {
      // add the piece to the board
      newPosition[location] = DRAGGED_PIECE;
    }

    // source piece was on the board and position is off the board
    if (validSquare(DRAGGED_PIECE_SOURCE) === true && location === 'offboard') {
      // remove the piece from the board
      delete newPosition[DRAGGED_PIECE_SOURCE];
    }

    // source piece was on the board and position is on the board
    if (validSquare(DRAGGED_PIECE_SOURCE) === true &&
      validSquare(location) === true) {
      // move the piece
      delete newPosition[DRAGGED_PIECE_SOURCE];
      newPosition[location] = DRAGGED_PIECE;
    }

    var oldPosition = deepCopy(CURRENT_POSITION);

    var result = cfg.onDrop(DRAGGED_PIECE_SOURCE, location, DRAGGED_PIECE,
      newPosition, oldPosition, CURRENT_ORIENTATION);
    if (result === 'snapback' || result === 'trash') {
      action = result;
    }
  }

  // do it!
  if (action === 'snapback') {
    snapbackDraggedPiece();
  }
  else if (action === 'trash') {
    trashDraggedPiece();
  }
  else if (action === 'drop') {
    dropDraggedPieceOnSquare(location);
  }
}

//------------------------------------------------------------------------------
// Public Methods
//------------------------------------------------------------------------------

// clear the board
widget.clear = function(useAnimation) {
  widget.position({}, useAnimation);
};

/*
// get or set config properties
// TODO: write this, GitHub Issue #1
widget.config = function(arg1, arg2) {
  // get the current config
  if (arguments.length === 0) {
    return deepCopy(cfg);
  }
};
*/

// remove the widget from the page
widget.destroy = function() {
  // remove markup
  containerEl.html('');
  draggedPieceEl.remove();

  // remove event handlers
  containerEl.unbind();
};

// shorthand method to get the current FEN
widget.fen = function() {
  return widget.position('fen');
};

// flip orientation
widget.flip = function() {
  widget.orientation('flip');
};

/*
// TODO: write this, GitHub Issue #5
widget.highlight = function() {

};
*/

// move pieces
widget.move = function() {
  // no need to throw an error here; just do nothing
  if (arguments.length === 0) return;

  var useAnimation = true;

  // collect the moves into an object
  var moves = {};
  for (var i = 0; i < arguments.length; i++) {
    // any "false" to this function means no animations
    if (arguments[i] === false) {
      useAnimation = false;
      continue;
    }

    // skip invalid arguments
    if (validMove(arguments[i]) !== true) {
      error(2826, 'Invalid move passed to the move method.', arguments[i]);
      continue;
    }

    var tmp = arguments[i].split('-');
    moves[tmp[0]] = tmp[1];
  }

  // calculate position from moves
  var newPos = calculatePositionFromMoves(CURRENT_POSITION, moves);

  // update the board
  widget.position(newPos, useAnimation);

  // return the new position object
  return newPos;
};

widget.orientation = function(arg) {
  // no arguments, return the current orientation
  if (arguments.length === 0) {
    return CURRENT_ORIENTATION;
  }

  // set to white or black
  if (arg === 'white' || arg === 'black') {
    CURRENT_ORIENTATION = arg;
    drawBoard();
    return;
  }

  // flip orientation
  if (arg === 'flip') {
    CURRENT_ORIENTATION = (CURRENT_ORIENTATION === 'white') ? 'black' : 'white';
    drawBoard();
    return;
  }

  error(5482, 'Invalid value passed to the orientation method.', arg);
};

widget.position = function(position, useAnimation) {
  // no arguments, return the current position
  if (arguments.length === 0) {
    return deepCopy(CURRENT_POSITION);
  }

  // get position as FEN
  if (typeof position === 'string' && position.toLowerCase() === 'fen') {
    return objToFen(CURRENT_POSITION);
  }

  // default for useAnimations is true
  if (useAnimation !== false) {
    useAnimation = true;
  }

  // start position
  if (typeof position === 'string' && position.toLowerCase() === 'start') {
    position = deepCopy(START_POSITION);
  }

  // convert FEN to position object
  if (validFen(position) === true) {
    position = fenToObj(position);
  }

  // validate position object
  if (validPositionObject(position) !== true) {
    error(6482, 'Invalid value passed to the position method.', position);
    return;
  }

  if (useAnimation === true) {
    // start the animations
    doAnimations(calculateAnimations(CURRENT_POSITION, position),
      CURRENT_POSITION, position);

    // set the new position
    setCurrentPosition(position);
  }
  // instant update
  else {
    setCurrentPosition(position);
    drawPositionInstant();
  }
};

widget.resize = function() {
  // calulate the new square size
  SQUARE_SIZE = calculateSquareSize();

  // set board width
  boardEl.css('width', (SQUARE_SIZE * 8) + 'px');

  // set drag piece size
  draggedPieceEl.css({
    height: SQUARE_SIZE,
    width: SQUARE_SIZE
  });

  // spare pieces
  if (cfg.sparePieces === true) {
    containerEl.find('.' + CSS.sparePieces)
      .css('paddingLeft', (SQUARE_SIZE + BOARD_BORDER_SIZE) + 'px');
  }

  // redraw the board
  drawBoard();
};

// set the starting position
widget.start = function(useAnimation) {
  widget.position('start', useAnimation);
};

//------------------------------------------------------------------------------
// Browser Events
//------------------------------------------------------------------------------

function isTouchDevice() {
  return ('ontouchstart' in document.documentElement);
}

// reference: http://www.quirksmode.org/js/detect.html
function isMSIE() {
  return (navigator && navigator.userAgent &&
      navigator.userAgent.search(/MSIE/) !== -1);
}

function stopDefault(e) {
  e.preventDefault();
}

function mousedownSquare(e) {
  // do nothing if we're not draggable
  if (cfg.draggable !== true) return;

  var square = $(this).attr('data-square');

  // no piece on this square
  if (validSquare(square) !== true ||
      CURRENT_POSITION.hasOwnProperty(square) !== true) {
    return;
  }

  beginDraggingPiece(square, CURRENT_POSITION[square], e.pageX, e.pageY);
}

function touchstartSquare(e) {
  // do nothing if we're not draggable
  if (cfg.draggable !== true) return;

  var square = $(this).attr('data-square');

  // no piece on this square
  if (validSquare(square) !== true ||
      CURRENT_POSITION.hasOwnProperty(square) !== true) {
    return;
  }

  e = e.originalEvent;
  beginDraggingPiece(square, CURRENT_POSITION[square],
    e.changedTouches[0].pageX, e.changedTouches[0].pageY);
}

function mousedownSparePiece(e) {
  // do nothing if sparePieces is not enabled
  if (cfg.sparePieces !== true) return;

  var piece = $(this).attr('data-piece');

  beginDraggingPiece('spare', piece, e.pageX, e.pageY);
}

function touchstartSparePiece(e) {
  // do nothing if sparePieces is not enabled
  if (cfg.sparePieces !== true) return;

  var piece = $(this).attr('data-piece');

  e = e.originalEvent;
  beginDraggingPiece('spare', piece,
    e.changedTouches[0].pageX, e.changedTouches[0].pageY);
}

function mousemoveWindow(e) {
  // do nothing if we are not dragging a piece
  if (DRAGGING_A_PIECE !== true) return;

  updateDraggedPiece(e.pageX, e.pageY);
}

function touchmoveWindow(e) {
  // do nothing if we are not dragging a piece
  if (DRAGGING_A_PIECE !== true) return;

  // prevent screen from scrolling
  e.preventDefault();

  updateDraggedPiece(e.originalEvent.changedTouches[0].pageX,
    e.originalEvent.changedTouches[0].pageY);
}

function mouseupWindow(e) {
  // do nothing if we are not dragging a piece
  if (DRAGGING_A_PIECE !== true) return;

  // get the location
  var location = isXYOnSquare(e.pageX, e.pageY);

  stopDraggedPiece(location);
}

function touchendWindow(e) {
  // do nothing if we are not dragging a piece
  if (DRAGGING_A_PIECE !== true) return;

  // get the location
  var location = isXYOnSquare(e.originalEvent.changedTouches[0].pageX,
    e.originalEvent.changedTouches[0].pageY);

  stopDraggedPiece(location);
}

function mouseenterSquare(e) {
  // do not fire this event if we are dragging a piece
  // NOTE: this should never happen, but it's a safeguard
  if (DRAGGING_A_PIECE !== false) return;

  if (cfg.hasOwnProperty('onMouseoverSquare') !== true ||
    typeof cfg.onMouseoverSquare !== 'function') return;

  // get the square
  var square = $(e.currentTarget).attr('data-square');

  // NOTE: this should never happen; defensive
  if (validSquare(square) !== true) return;

  // get the piece on this square
  var piece = false;
  if (CURRENT_POSITION.hasOwnProperty(square) === true) {
    piece = CURRENT_POSITION[square];
  }

  // execute their function
  cfg.onMouseoverSquare(square, piece, deepCopy(CURRENT_POSITION),
    CURRENT_ORIENTATION);
}

function mouseleaveSquare(e) {
  // do not fire this event if we are dragging a piece
  // NOTE: this should never happen, but it's a safeguard
  if (DRAGGING_A_PIECE !== false) return;

  if (cfg.hasOwnProperty('onMouseoutSquare') !== true ||
    typeof cfg.onMouseoutSquare !== 'function') return;

  // get the square
  var square = $(e.currentTarget).attr('data-square');

  // NOTE: this should never happen; defensive
  if (validSquare(square) !== true) return;

  // get the piece on this square
  var piece = false;
  if (CURRENT_POSITION.hasOwnProperty(square) === true) {
    piece = CURRENT_POSITION[square];
  }

  // execute their function
  cfg.onMouseoutSquare(square, piece, deepCopy(CURRENT_POSITION),
    CURRENT_ORIENTATION);
}

//------------------------------------------------------------------------------
// Initialization
//------------------------------------------------------------------------------

function addEvents() {
  // prevent browser "image drag"
  $('body').on('mousedown mousemove', '.' + CSS.piece, stopDefault);

  // mouse drag pieces
  boardEl.on('mousedown', '.' + CSS.square, mousedownSquare);
  containerEl.on('mousedown', '.' + CSS.sparePieces + ' .' + CSS.piece,
    mousedownSparePiece);

  // mouse enter / leave square
  boardEl.on('mouseenter', '.' + CSS.square, mouseenterSquare);
  boardEl.on('mouseleave', '.' + CSS.square, mouseleaveSquare);

  // IE doesn't like the events on the window object, but other browsers
  // perform better that way
  if (isMSIE() === true) {
    // IE-specific prevent browser "image drag"
    document.ondragstart = function() { return false; };

    $('body').on('mousemove', mousemoveWindow);
    $('body').on('mouseup', mouseupWindow);
  }
  else {
    $(window).on('mousemove', mousemoveWindow);
    $(window).on('mouseup', mouseupWindow);
  }

  // touch drag pieces
  if (isTouchDevice() === true) {
    boardEl.on('touchstart', '.' + CSS.square, touchstartSquare);
    containerEl.on('touchstart', '.' + CSS.sparePieces + ' .' + CSS.piece,
      touchstartSparePiece);
    $(window).on('touchmove', touchmoveWindow);
    $(window).on('touchend', touchendWindow);
  }
}

function initDom() {
  // build board and save it in memory
  containerEl.html(buildBoardContainer());
  boardEl = containerEl.find('.' + CSS.board);

  if (cfg.sparePieces === true) {
    sparePiecesTopEl = containerEl.find('.' + CSS.sparePiecesTop);
    sparePiecesBottomEl = containerEl.find('.' + CSS.sparePiecesBottom);
  }

  // create the drag piece
  var draggedPieceId = createId();
  $('body').append(buildPiece('wP', true, draggedPieceId));
  draggedPieceEl = $('#' + draggedPieceId);

  // get the border size
  BOARD_BORDER_SIZE = parseInt(boardEl.css('borderLeftWidth'), 10);

  // set the size and draw the board
  widget.resize();
}

function init() {
  if (checkDeps() !== true ||
      expandConfig() !== true) return;

  // create unique IDs for all the elements we will create
  createElIds();

  initDom();
  addEvents();
}

// go time
init();

// return the widget object
return widget;

}; // end window.ChessBoard

// expose util functions
window.ChessBoard.fenToObj = fenToObj;
window.ChessBoard.objToFen = objToFen;

})(); // end anonymous wrapper




















































































</script><tw-passagedata pid="1" name="welcome" tags="" position="271,2">Welcome to Ghost Pieces. 
&lt;nav class=&quot;navigation&quot;&gt;
  &lt;ul class=&quot;mainmenu&quot;&gt;
    &lt;li&gt;[[Play-&gt;welcome2]]&lt;/li&gt;
    &lt;li&gt;[[Settings-&gt;menu]]&lt;/li&gt;
    &lt;li&gt;[[Rules-&gt;rules]]&lt;/li&gt;
	&lt;li&gt;[[About-&gt;about]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
</tw-passagedata><tw-passagedata pid="2" name="level_1" tags="" position="132,610">&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square1 to random(1, 64)&gt;&gt;\
&lt;&lt;if $square1 is 1&gt;&gt;&lt;&lt;set $sq1 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 2&gt;&gt;&lt;&lt;set $sq1 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 3&gt;&gt;&lt;&lt;set $sq1 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 4&gt;&gt;&lt;&lt;set $sq1 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 5&gt;&gt;&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 6&gt;&gt;&lt;&lt;set $sq1 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 7&gt;&gt;&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 8&gt;&gt;&lt;&lt;set $sq1 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 9&gt;&gt;&lt;&lt;set $sq1 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 10&gt;&gt;&lt;&lt;set $sq1 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 11&gt;&gt;&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 12&gt;&gt;&lt;&lt;set $sq1 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 13&gt;&gt;&lt;&lt;set $sq1 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 14&gt;&gt;&lt;&lt;set $sq1 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 15&gt;&gt;&lt;&lt;set $sq1 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 16&gt;&gt;&lt;&lt;set $sq1 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 17&gt;&gt;&lt;&lt;set $sq1 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 18&gt;&gt;&lt;&lt;set $sq1 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 19&gt;&gt;&lt;&lt;set $sq1 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 20&gt;&gt;&lt;&lt;set $sq1 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 21&gt;&gt;&lt;&lt;set $sq1 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 22&gt;&gt;&lt;&lt;set $sq1 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 23&gt;&gt;&lt;&lt;set $sq1 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 24&gt;&gt;&lt;&lt;set $sq1 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 25&gt;&gt;&lt;&lt;set $sq1 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 26&gt;&gt;&lt;&lt;set $sq1 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 27&gt;&gt;&lt;&lt;set $sq1 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 28&gt;&gt;&lt;&lt;set $sq1 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 29&gt;&gt;&lt;&lt;set $sq1 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 30&gt;&gt;&lt;&lt;set $sq1 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 31&gt;&gt;&lt;&lt;set $sq1 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 32&gt;&gt;&lt;&lt;set $sq1 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 33&gt;&gt;&lt;&lt;set $sq1 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 34&gt;&gt;&lt;&lt;set $sq1 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 35&gt;&gt;&lt;&lt;set $sq1 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 36&gt;&gt;&lt;&lt;set $sq1 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 37&gt;&gt;&lt;&lt;set $sq1 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 38&gt;&gt;&lt;&lt;set $sq1 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 39&gt;&gt;&lt;&lt;set $sq1 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 40&gt;&gt;&lt;&lt;set $sq1 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 41&gt;&gt;&lt;&lt;set $sq1 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 42&gt;&gt;&lt;&lt;set $sq1 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 43&gt;&gt;&lt;&lt;set $sq1 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 44&gt;&gt;&lt;&lt;set $sq1 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 45&gt;&gt;&lt;&lt;set $sq1 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 46&gt;&gt;&lt;&lt;set $sq1 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 47&gt;&gt;&lt;&lt;set $sq1 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 48&gt;&gt;&lt;&lt;set $sq1 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 49&gt;&gt;&lt;&lt;set $sq1 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 50&gt;&gt;&lt;&lt;set $sq1 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 51&gt;&gt;&lt;&lt;set $sq1 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 52&gt;&gt;&lt;&lt;set $sq1 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 53&gt;&gt;&lt;&lt;set $sq1 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 54&gt;&gt;&lt;&lt;set $sq1 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 55&gt;&gt;&lt;&lt;set $sq1 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 56&gt;&gt;&lt;&lt;set $sq1 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 57&gt;&gt;&lt;&lt;set $sq1 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 58&gt;&gt;&lt;&lt;set $sq1 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 59&gt;&gt;&lt;&lt;set $sq1 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 60&gt;&gt;&lt;&lt;set $sq1 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 61&gt;&gt;&lt;&lt;set $sq1 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 62&gt;&gt;&lt;&lt;set $sq1 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 63&gt;&gt;&lt;&lt;set $sq1 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 64&gt;&gt;&lt;&lt;set $sq1 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
Square: $sq1
&lt;&lt;button &quot; WHITE &quot; &quot;white&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; BLACK &quot; &quot;black&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;if $clock eq 5&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 10&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 15&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 30&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 60&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 120&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="level_2" tags="" position="460,611">&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square1 to random(1, 32)&gt;&gt;\
&lt;&lt;if $square1 is 1&gt;&gt;&lt;&lt;set $sq1 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 2&gt;&gt;&lt;&lt;set $sq1 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 3&gt;&gt;&lt;&lt;set $sq1 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 4&gt;&gt;&lt;&lt;set $sq1 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 5&gt;&gt;&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 6&gt;&gt;&lt;&lt;set $sq1 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 7&gt;&gt;&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 8&gt;&gt;&lt;&lt;set $sq1 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 9&gt;&gt;&lt;&lt;set $sq1 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 10&gt;&gt;&lt;&lt;set $sq1 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 11&gt;&gt;&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 12&gt;&gt;&lt;&lt;set $sq1 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 13&gt;&gt;&lt;&lt;set $sq1 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 14&gt;&gt;&lt;&lt;set $sq1 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 15&gt;&gt;&lt;&lt;set $sq1 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 16&gt;&gt;&lt;&lt;set $sq1 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 17&gt;&gt;&lt;&lt;set $sq1 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 18&gt;&gt;&lt;&lt;set $sq1 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 19&gt;&gt;&lt;&lt;set $sq1 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 20&gt;&gt;&lt;&lt;set $sq1 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 21&gt;&gt;&lt;&lt;set $sq1 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 22&gt;&gt;&lt;&lt;set $sq1 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 23&gt;&gt;&lt;&lt;set $sq1 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 24&gt;&gt;&lt;&lt;set $sq1 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 25&gt;&gt;&lt;&lt;set $sq1 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 26&gt;&gt;&lt;&lt;set $sq1 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 27&gt;&gt;&lt;&lt;set $sq1 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 28&gt;&gt;&lt;&lt;set $sq1 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 29&gt;&gt;&lt;&lt;set $sq1 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 30&gt;&gt;&lt;&lt;set $sq1 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 31&gt;&gt;&lt;&lt;set $sq1 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 32&gt;&gt;&lt;&lt;set $sq1 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 33&gt;&gt;&lt;&lt;set $sq1 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 34&gt;&gt;&lt;&lt;set $sq1 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 35&gt;&gt;&lt;&lt;set $sq1 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 36&gt;&gt;&lt;&lt;set $sq1 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 37&gt;&gt;&lt;&lt;set $sq1 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 38&gt;&gt;&lt;&lt;set $sq1 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 39&gt;&gt;&lt;&lt;set $sq1 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 40&gt;&gt;&lt;&lt;set $sq1 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 41&gt;&gt;&lt;&lt;set $sq1 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 42&gt;&gt;&lt;&lt;set $sq1 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 43&gt;&gt;&lt;&lt;set $sq1 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 44&gt;&gt;&lt;&lt;set $sq1 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 45&gt;&gt;&lt;&lt;set $sq1 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 46&gt;&gt;&lt;&lt;set $sq1 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 47&gt;&gt;&lt;&lt;set $sq1 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 48&gt;&gt;&lt;&lt;set $sq1 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 49&gt;&gt;&lt;&lt;set $sq1 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 50&gt;&gt;&lt;&lt;set $sq1 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 51&gt;&gt;&lt;&lt;set $sq1 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 52&gt;&gt;&lt;&lt;set $sq1 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 53&gt;&gt;&lt;&lt;set $sq1 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 54&gt;&gt;&lt;&lt;set $sq1 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 55&gt;&gt;&lt;&lt;set $sq1 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 56&gt;&gt;&lt;&lt;set $sq1 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 57&gt;&gt;&lt;&lt;set $sq1 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 58&gt;&gt;&lt;&lt;set $sq1 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 59&gt;&gt;&lt;&lt;set $sq1 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 60&gt;&gt;&lt;&lt;set $sq1 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 61&gt;&gt;&lt;&lt;set $sq1 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 62&gt;&gt;&lt;&lt;set $sq1 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 63&gt;&gt;&lt;&lt;set $sq1 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 64&gt;&gt;&lt;&lt;set $sq1 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $sq2 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square2 to random(33, 64)&gt;&gt;\
&lt;&lt;if $square2 is 1&gt;&gt;&lt;&lt;set $sq2 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 2&gt;&gt;&lt;&lt;set $sq2 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 3&gt;&gt;&lt;&lt;set $sq2 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 4&gt;&gt;&lt;&lt;set $sq2 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 5&gt;&gt;&lt;&lt;set $sq2 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 6&gt;&gt;&lt;&lt;set $sq2 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 7&gt;&gt;&lt;&lt;set $sq2 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 8&gt;&gt;&lt;&lt;set $sq2 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 9&gt;&gt;&lt;&lt;set $sq2 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 10&gt;&gt;&lt;&lt;set $sq2 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 11&gt;&gt;&lt;&lt;set $sq2 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 12&gt;&gt;&lt;&lt;set $sq2 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 13&gt;&gt;&lt;&lt;set $sq2 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 14&gt;&gt;&lt;&lt;set $sq2 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 15&gt;&gt;&lt;&lt;set $sq2 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 16&gt;&gt;&lt;&lt;set $sq2 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 17&gt;&gt;&lt;&lt;set $sq2 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 18&gt;&gt;&lt;&lt;set $sq2 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 19&gt;&gt;&lt;&lt;set $sq2 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 20&gt;&gt;&lt;&lt;set $sq2 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 21&gt;&gt;&lt;&lt;set $sq2 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 22&gt;&gt;&lt;&lt;set $sq2 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 23&gt;&gt;&lt;&lt;set $sq2 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 24&gt;&gt;&lt;&lt;set $sq2 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 25&gt;&gt;&lt;&lt;set $sq2 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 26&gt;&gt;&lt;&lt;set $sq2 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 27&gt;&gt;&lt;&lt;set $sq2 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 28&gt;&gt;&lt;&lt;set $sq2 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 29&gt;&gt;&lt;&lt;set $sq2 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 30&gt;&gt;&lt;&lt;set $sq2 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 31&gt;&gt;&lt;&lt;set $sq2 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 32&gt;&gt;&lt;&lt;set $sq2 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 33&gt;&gt;&lt;&lt;set $sq2 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 34&gt;&gt;&lt;&lt;set $sq2 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 35&gt;&gt;&lt;&lt;set $sq2 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 36&gt;&gt;&lt;&lt;set $sq2 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 37&gt;&gt;&lt;&lt;set $sq2 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 38&gt;&gt;&lt;&lt;set $sq2 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 39&gt;&gt;&lt;&lt;set $sq2 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 40&gt;&gt;&lt;&lt;set $sq2 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 41&gt;&gt;&lt;&lt;set $sq2 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 42&gt;&gt;&lt;&lt;set $sq2 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 43&gt;&gt;&lt;&lt;set $sq2 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 44&gt;&gt;&lt;&lt;set $sq2 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 45&gt;&gt;&lt;&lt;set $sq2 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 46&gt;&gt;&lt;&lt;set $sq2 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 47&gt;&gt;&lt;&lt;set $sq2 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 48&gt;&gt;&lt;&lt;set $sq2 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 49&gt;&gt;&lt;&lt;set $sq2 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 50&gt;&gt;&lt;&lt;set $sq2 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 51&gt;&gt;&lt;&lt;set $sq2 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 52&gt;&gt;&lt;&lt;set $sq2 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 53&gt;&gt;&lt;&lt;set $sq2 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 54&gt;&gt;&lt;&lt;set $sq2 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 55&gt;&gt;&lt;&lt;set $sq2 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 56&gt;&gt;&lt;&lt;set $sq2 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 57&gt;&gt;&lt;&lt;set $sq2 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 58&gt;&gt;&lt;&lt;set $sq2 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 59&gt;&gt;&lt;&lt;set $sq2 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 60&gt;&gt;&lt;&lt;set $sq2 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 61&gt;&gt;&lt;&lt;set $sq2 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 62&gt;&gt;&lt;&lt;set $sq2 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 63&gt;&gt;&lt;&lt;set $sq2 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 64&gt;&gt;&lt;&lt;set $sq2 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;
Square 1:  $sq1
Square 2:  $sq2
&lt;&lt;button &quot; YES &quot; &quot;yes&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;no&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;if $clock eq 5&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 10&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 15&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 30&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 60&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 120&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;

</tw-passagedata><tw-passagedata pid="4" name="exit" tags="" position="19,233">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;
hey $name
Your highscore is: $points

&lt;html&gt;&lt;div class=&quot;ss-form&quot;&gt;&lt;form action=&quot;https://docs.google.com/forms/d/e/1FAIpQLSerWfYahrItrKtN83pkEM0cYJdb0cvhakv2ZeLboEn2_AdIZw/formResponse&quot; method=&quot;POST&quot; id=&quot;ss-form&quot; target=&quot;_self&quot; autocomplete=&quot;on&quot; onsubmit=&quot;&quot;&gt;&lt;ol role=&quot;list&quot; class=&quot;ss-question-list&quot; style=&quot;padding-left: 0;&quot;&gt;

&lt;div class=&quot;ss-form-question errorbox-good&quot; role=&quot;listitem&quot;&gt;
&lt;div dir=&quot;auto&quot; class=&quot;ss-item  ss-text&quot;&gt;&lt;div class=&quot;ss-form-entry&quot;&gt;
&lt;label class=&quot;ss-q-item-label&quot; for=&quot;entry_816981504&quot;&gt;&lt;div class=&quot;ss-q-title&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;ss-q-help ss-secondary-text&quot; dir=&quot;auto&quot;&gt;&lt;/div&gt;&lt;/label&gt;

&lt;input type=&quot;hidden&quot; name=&quot;entry.816981504&quot; value=&quot;&quot; class=&quot;ss-q-short&quot; id=&quot;entry_816981504&quot; dir=&quot;auto&quot; aria-label=&quot;Name:  &quot; title=&quot;&quot;&gt;
&lt;div class=&quot;error-message&quot; id=&quot;1022862133_errorMessage&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;required-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt; &lt;div class=&quot;ss-form-question errorbox-good&quot; role=&quot;listitem&quot;&gt;
&lt;div dir=&quot;auto&quot; class=&quot;ss-item  ss-text&quot;&gt;&lt;div class=&quot;ss-form-entry&quot;&gt;
&lt;label class=&quot;ss-q-item-label&quot; for=&quot;entry_223958687&quot;&gt;&lt;div class=&quot;ss-q-title&quot;&gt;
&lt;/div&gt;
&lt;div class=&quot;ss-q-help ss-secondary-text&quot; dir=&quot;auto&quot;&gt;&lt;/div&gt;&lt;/label&gt;

&lt;input type=&quot;hidden&quot; name=&quot;entry.223958687&quot; value=&quot;&quot; class=&quot;ss-q-short&quot; id=&quot;entry_223958687&quot; dir=&quot;auto&quot; aria-label=&quot;Score:  &quot; title=&quot;&quot;&gt;
&lt;div class=&quot;error-message&quot; id=&quot;815462271_errorMessage&quot;&gt;&lt;/div&gt;
&lt;div class=&quot;required-message&quot;&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;
&lt;input type=&quot;hidden&quot; name=&quot;draftResponse&quot; value=&quot;[null,null,&amp;quot;543221514949115966&amp;quot;]
&quot;&gt;
&lt;input type=&quot;hidden&quot; name=&quot;pageHistory&quot; value=&quot;0&quot;&gt;
&lt;input type=&quot;hidden&quot; name=&quot;fbzx&quot; value=&quot;543221514949115966&quot;&gt;
&lt;div class=&quot;ss-send-email-receipt&quot; style=&quot;margin-bottom: 4px;&quot; dir=&quot;ltr&quot;&gt;&lt;label for=&quot;emailReceipt&quot; style=&quot;display:inline;&quot;&gt;&lt;/label&gt;&lt;/div&gt;
&lt;div class=&quot;ss-item ss-navigate&quot;&gt;&lt;table id=&quot;navigation-table&quot;&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&quot;ss-form-entry goog-inline-block&quot; id=&quot;navigation-buttons&quot; dir=&quot;ltr&quot;&gt;
&lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;Upload Highscore&quot; id=&quot;ss-submit&quot; class=&quot;jfk-button jfk-button-action &quot;&gt;
&lt;div class=&quot;ss-password-warning ss-secondary-text&quot;&gt;&lt;/div&gt;&lt;/td&gt;
&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/div&gt;&lt;/ol&gt;&lt;/form&gt;&lt;/div&gt;&lt;/html&gt;&lt;&lt;googleForms &quot;$name&quot; &quot;$points&quot;&gt;&gt;
&lt;a href=&quot;https://arunjchess.github.io/Chess_test/leaderboard.html&quot;&gt;Visit Leader Board&lt;/a&gt;
&lt;&lt;button &quot;Back&quot; &quot;progress&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="5" name="white" tags="" position="126,711">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;if $square1 % 2 is 0&gt;&gt;\
&lt;&lt;set $points to $points + 1&gt;&gt;\
You got it right!
&lt;&lt;elseif $square1 % 2 neq 0&gt;&gt;\
&lt;&lt;set $points to $points - 1&gt;&gt;\
Wrong Answer.
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;level_1&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r1&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="6" name="black" tags="" position="124,813">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;if $square1 % 2 is 0&gt;&gt;\
&lt;&lt;set $points to $points - 1&gt;&gt;\
Wrong Answer.
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;elseif $square1 % 2 neq 0&gt;&gt;
&lt;&lt;set $points to $points + 1&gt;&gt;
You got it right!
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;level_1&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r1&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="7" name="yes" tags="" position="456,718">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;if $square1 % 2 is $square2 % 2&gt;&gt;\
&lt;&lt;set $points to $points + 1.5&gt;&gt;\
You got it right!
&lt;&lt;elseif $sqare % 2 neq $square2 % 2&gt;&gt;\
&lt;&lt;set $points to $points - 1&gt;&gt;\
Wrong Answer. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;level_2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r3&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="8" name="no" tags="" position="457,821">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;if $square1 % 2 is $square2 % 2&gt;&gt;\
&lt;&lt;set $points to $points - 1&gt;&gt;\
Wrong Answer. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;\
&lt;&lt;elseif $sqare % 2 neq $square2 % 2&gt;&gt;\
&lt;&lt;set $points to $points + 1.5&gt;&gt;\
You got it right!
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;level_2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r3&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="9" name="welcome2" tags="" position="127,8">&lt;nav class=&quot;navigation&quot;&gt;
  &lt;ul class=&quot;mainmenu&quot;&gt;
    &lt;li&gt;[[Easy-&gt;easy]]&lt;/li&gt;
    &lt;li&gt;[[Medium-&gt;medium]]&lt;/li&gt;
    &lt;li&gt;[[Hard-&gt;hard]]&lt;/li&gt;
    &lt;li&gt;[[Settings-&gt;menu]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;</tw-passagedata><tw-passagedata pid="10" name="menu" tags="" position="632,15">&lt;nav class=&quot;navigation&quot;&gt;
  &lt;ul class=&quot;mainmenu&quot;&gt;
    &lt;li&gt;[[&quot;Choose Level&quot;-&gt;welcome2]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Timer Settings&quot;-&gt;clock]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Rules&quot;-&gt;rules]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Progress&quot;-&gt;progress]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;</tw-passagedata><tw-passagedata pid="11" name="level_3" tags="" position="566,608">&lt;&lt;set $x to random(1,20)&gt;&gt;\
&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $sq2 to &quot;&quot;&gt;&gt;\
&lt;&lt;if $x is 1&gt;&gt;\
&lt;&lt;set $sq1 to &quot;e3&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;h6&quot;&gt;&gt;\
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 2&gt;&gt;\
&lt;&lt;set $sq1 to &quot;a4&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;e1&quot;&gt;&gt;\
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 3&gt;&gt;\
&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;a7&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 4&gt;&gt;\
&lt;&lt;set $sq1 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;set $sq2 to &quot;g3&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 5&gt;&gt;\
&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;set $sq2 to &quot;h4&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 6&gt;&gt;\
&lt;&lt;set $sq1 to &quot;d5&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;g8&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 7&gt;&gt;\
&lt;&lt;set $sq1 to &quot;b8&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;e4&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 8&gt;&gt;\
&lt;&lt;set $sq1 to &quot;e2&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;b5&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 9&gt;&gt;\
&lt;&lt;set $sq1 to &quot;e8&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;a5&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 10&gt;&gt;\
&lt;&lt;set $sq1 to &quot;a7&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;f2&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 11&gt;&gt;\
&lt;&lt;set $sq1 to &quot;a8&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;f3&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 12&gt;&gt;\
&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;b6&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 13&gt;&gt;\
&lt;&lt;set $sq1 to &quot;h4&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;d8&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 14&gt;&gt;\
&lt;&lt;set $sq1 to &quot;e3&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;b5&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 15&gt;&gt;\
&lt;&lt;set $sq1 to &quot;b2&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;f6&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 16&gt;&gt;\
&lt;&lt;set $sq1 to &quot;a7&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;d4&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 17&gt;&gt;\
&lt;&lt;set $sq1 to &quot;d2&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;b5&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 18&gt;&gt;\
&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;set $sq2 to &quot;h5&quot;&gt;&gt;\
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 19&gt;&gt;\
&lt;&lt;set $sq1 to &quot;d6&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;h3&quot;&gt;&gt;\ 
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;elseif $x is 20&gt;&gt;\
&lt;&lt;set $sq1 to &quot;c5&quot;&gt;&gt;\ 
&lt;&lt;set $sq2 to &quot;g1&quot;&gt;&gt;\
Square 1: $sq1
Square 2: $sq2
&lt;&lt;button &quot; YES &quot; &quot;right&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;   &lt;&lt;button &quot; NO &quot; &quot;wrong&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $clock eq 5&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 10&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 15&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 30&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 60&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 120&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;
</tw-passagedata><tw-passagedata pid="12" name="wrong" tags="" position="561,820">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;
&lt;&lt;set $points to $points - 1&gt;&gt;\
Uh, oh. Wrong Answer. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;level_3&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r4&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="13" name="right" tags="" position="562,716">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;set $points to $points + 1.5&gt;&gt;\
Yay! Right Answer
&lt;&lt;button &quot;Next Puzzle&quot; &quot;level_3&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r4&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="14" name="clock" tags="" position="16,127">Set Countdown timer using the below options. 

&lt;&lt;dropdown &#x27;$clock&#x27; &#x27;5&#x27; &#x27;10&#x27; &#x27;15&#x27; &#x27;30&#x27; &#x27;60&#x27; &#x27;120&#x27; &gt;&gt;&lt;&lt;button &quot;Save&quot; &quot;menu&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;

</tw-passagedata><tw-passagedata pid="15" name="dropdown" tags="widget" position="1005,5">&lt;&lt;script&gt;&gt;
// dropdown macro, by chapel; for sugarcube 2
// version 1.1
// see the documentation: https://github.com/ChapelR/custom-macros-for-sugarcube-2#dropdown-macro

// &lt;&lt;dropdown&gt;&gt; macro
Macro.add(&#x27;dropdown&#x27;, {
	handler : function () {
		
        var $wrapper = $(document.createElement(&#x27;span&#x27;));
        var $drop    = $(document.createElement(&#x27;select&#x27;));
		
        var opts     = this.args;
        var storyVar = opts.shift();
        var store;
        var i;
		
		// add array handling for args (v1.1)
		opts = (function (options) {
			var arr = [];
			options.forEach( function (val) {
				if (Array.isArray(val)) {
					arr = arr.concat(val);
				} else {
					arr.push(val);
				}
			});
			return arr;
		}(opts));
		
        // handle simple errors
        if (typeof storyVar == &#x27;undefined&#x27;) {
            return this.error(&#x27;No arguments provided.&#x27;);
        }
        if (opts.length &lt; 1) {
            return this.error(&#x27;Must provide at least one list option.&#x27;);
        }
		
        if (storyVar.charAt(0) === &#x27;$&#x27;) {
            store = State.variables;
        } else if (storyVar.charAt(0) === &#x27;_&#x27;) {
            store = State.temporary;
        } else {
            return this.error(&#x27;First argument should be a valid TwineScript variable.&#x27;);
        }
        storyVar = storyVar.slice(1);
        store[storyVar] = opts[0];
			
		
        for (i = 0; i &lt; opts.length; i++) {
            var $option = $(document.createElement(&#x27;option&#x27;));
            $option
                .attr(&#x27;value&#x27;, opts[i])
                .wiki(opts[i])
                .appendTo($drop);
        }
		
        $drop
            .attr({
                name : &#x27;dropdown-macro&#x27;,
                id   : storyVar
            })
            .appendTo($wrapper);
		
        $wrapper
            .addClass(&#x27;macro-&#x27; + this.name)
            .appendTo(this.output);
		
        $(document).on(&#x27;change&#x27;, &#x27;select#&#x27; + storyVar, function () { 
            store[storyVar] = $(&#x27;select#&#x27; + storyVar).val();
        })
		
		
    }
});
&lt;&lt;/script&gt;&gt;</tw-passagedata><tw-passagedata pid="16" name="StoryInit" tags="" position="1107,2">&lt;&lt;cacheaudio &quot;ticktock&quot; &quot;audio/clocktick2.wav&quot;&gt;&gt;
&lt;&lt;set $clock to 10&gt;&gt;
&lt;&lt;set $points to 0&gt;&gt;
&lt;&lt;set $name to &quot;&quot;&gt;&gt;
</tw-passagedata><tw-passagedata pid="17" name="rules" tags="" position="1333,11">&lt;&lt;set $sq1 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;set $sq2 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;set $sq3 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;set $sq4 to &quot;a2&quot;&gt;&gt;\
Game Rules: 
Level: Easy 
[[&quot;Game 1: Square Colours&quot;-&gt;r1]]
[[&quot;Game 2: Alien Capture&quot;-&gt;r2]]

Level: Medium
[[&quot;Game 1: Two Squares&quot;-&gt;r3]]
[[&quot;Game 2: Bishop Diagonal&quot;-&gt;r4]]
[[&quot;Game 3: Memory Challenge 1&quot;-&gt;r7]]

Level: Difficult
[[&quot;Game 1: Knight Moves 1&quot;-&gt;r5]]
[[&quot;Game 2: Knight Moves 2&quot;-&gt;r6]]
[[&quot;Game 3: Memory Challenge 2&quot;-&gt;r8]]
&lt;&lt;button &quot;Settings&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="18" name="progress" tags="" position="21,337">Total Points: $points

Enter Your Name: &lt;&lt;textbox &quot;$name&quot; &quot;&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;button &quot;Add Name&quot; &quot;exit&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;set $name = $name.trim()&gt;&gt;
&lt;&lt;if $name eq &quot;&quot;&gt;&gt;
&lt;&lt;set $name = &quot;Anonymous&quot; + random(1,9999)&gt;&gt;
&lt;&lt;endif&gt;&gt;
&lt;&lt;button &quot;Back&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="19" name="easy" tags="" position="196,498">&lt;nav class=&quot;navigation&quot;&gt;
  &lt;ul class=&quot;mainmenu&quot;&gt;
    &lt;li&gt;[[&quot;Square Colours&quot;-&gt;level_1]]&lt;/li&gt;
	&lt;li&gt;[[&quot;Alien Capture&quot;-&gt;aliencapture]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Back&quot;-&gt;welcome2]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
</tw-passagedata><tw-passagedata pid="20" name="medium" tags="" position="501,497">&lt;nav class=&quot;navigation&quot;&gt;
  &lt;ul class=&quot;mainmenu&quot;&gt;
    &lt;li&gt;[[&quot;Bishop Diagonal&quot;-&gt;level_3]]&lt;/li&gt;
	&lt;li&gt;[[&quot;Two Squares&quot;-&gt;level_2]]&lt;/li&gt;
	&lt;li&gt;[[&quot;Memory I&quot;-&gt;memory1]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Back&quot;-&gt;welcome2]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;
</tw-passagedata><tw-passagedata pid="21" name="hard" tags="" position="990,490">&lt;nav class=&quot;navigation&quot;&gt;
  &lt;ul class=&quot;mainmenu&quot;&gt;
    &lt;li&gt;[[&quot;Knight Moves 1&quot;-&gt;knight]]&lt;/li&gt;
    &lt;li&gt;[[&quot;Knight Moves 2&quot;-&gt;knight2]]&lt;/li&gt;
	&lt;li&gt;[[&quot;Memory Challenge 2&quot;-&gt;memory2]]&lt;/li&gt;
	&lt;li&gt;[[&quot;Back&quot;-&gt;welcome2]]&lt;/li&gt;
  &lt;/ul&gt;
&lt;/nav&gt;</tw-passagedata><tw-passagedata pid="22" name="knight" tags="" position="942,601">&lt;&lt;set $knight_ans to &quot;&quot;&gt;&gt;
&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square1 to random(1, 16)&gt;&gt;\
&lt;&lt;if $square1 is 1&gt;&gt;&lt;&lt;set $sq1 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 2&gt;&gt;&lt;&lt;set $sq1 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 3&gt;&gt;&lt;&lt;set $sq1 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 4&gt;&gt;&lt;&lt;set $sq1 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 5&gt;&gt;&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 6&gt;&gt;&lt;&lt;set $sq1 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 7&gt;&gt;&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 8&gt;&gt;&lt;&lt;set $sq1 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 9&gt;&gt;&lt;&lt;set $sq1 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 10&gt;&gt;&lt;&lt;set $sq1 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 11&gt;&gt;&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 12&gt;&gt;&lt;&lt;set $sq1 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 13&gt;&gt;&lt;&lt;set $sq1 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 14&gt;&gt;&lt;&lt;set $sq1 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 15&gt;&gt;&lt;&lt;set $sq1 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 16&gt;&gt;&lt;&lt;set $sq1 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $sq2 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square2 to random(49, 64)&gt;&gt;\
&lt;&lt;if $square2 is 49&gt;&gt;&lt;&lt;set $sq2 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 50&gt;&gt;&lt;&lt;set $sq2 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 51&gt;&gt;&lt;&lt;set $sq2 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 52&gt;&gt;&lt;&lt;set $sq2 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 53&gt;&gt;&lt;&lt;set $sq2 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 54&gt;&gt;&lt;&lt;set $sq2 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 55&gt;&gt;&lt;&lt;set $sq2 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 56&gt;&gt;&lt;&lt;set $sq2 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 57&gt;&gt;&lt;&lt;set $sq2 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 58&gt;&gt;&lt;&lt;set $sq2 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 59&gt;&gt;&lt;&lt;set $sq2 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 60&gt;&gt;&lt;&lt;set $sq2 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 61&gt;&gt;&lt;&lt;set $sq2 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 62&gt;&gt;&lt;&lt;set $sq2 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 63&gt;&gt;&lt;&lt;set $sq2 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 64&gt;&gt;&lt;&lt;set $sq2 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;
Square 1:  $sq1
Square 2:  $sq2

&lt;&lt;dropdown &#x27;$knight_ans&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &#x27;7&#x27;&gt;&gt;

&lt;&lt;button GO &quot;knight_ans&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;
&lt;&lt;if $clock eq 5&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 10&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 15&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 30&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 60&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 120&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;</tw-passagedata><tw-passagedata pid="23" name="knight_ans" tags="" position="941,707">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;script&gt;&gt;
var square1 = State.variables.sq1;
var square2 = State.variables.sq2;
function findCoo(el) {
  return [
    el[1] - 1, // the row value - 1
    el[0].codePointAt() - &#x27;a&#x27;.codePointAt() // the column ascii value - ascii value of a
  ];
}
var [col1,row1] = findCoo(square1);
var [col2,row2] = findCoo(square2);
var krow = row1 - row2;
var kcol = col1 - col2;
var abskrow = (krow &lt; 0) ? -krow : krow;
var abskcol = (kcol &lt; 0) ? -kcol : kcol;
var knightmatrix = [
[&quot;0&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;3&quot;,&quot;2&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;],
[&quot;2&quot;,&quot;1&quot;,&quot;4&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;],
[&quot;2&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;],
[&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;5&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;]]
var ans = knightmatrix[abskrow][abskcol]
setup.testFunction = function () {
    return ans;
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;set $var to setup.testFunction()&gt;&gt;\
&lt;&lt;if $var is $knight_ans&gt;&gt;\
&lt;&lt;set $points to $points + 2&gt;&gt;
You got it right!
&lt;&lt;elseif $var neq $knight_ans&gt;&gt;\
&lt;&lt;set $points to $points - 1&gt;&gt;
Uh, oh. Wrong Answer.
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;knight&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r5&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="24" name="knight2" tags="" position="1053,603">&lt;&lt;set $knight_ans to &quot;&quot;&gt;&gt;
&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square1 to random(1, 8)&gt;&gt;\
&lt;&lt;if $square1 is 1&gt;&gt;&lt;&lt;set $sq1 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 2&gt;&gt;&lt;&lt;set $sq1 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 3&gt;&gt;&lt;&lt;set $sq1 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 4&gt;&gt;&lt;&lt;set $sq1 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 5&gt;&gt;&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 6&gt;&gt;&lt;&lt;set $sq1 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 7&gt;&gt;&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 8&gt;&gt;&lt;&lt;set $sq1 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $sq2 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square2 to random(49, 64)&gt;&gt;
&lt;&lt;if $square2 is 49&gt;&gt;&lt;&lt;set $sq2 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 50&gt;&gt;&lt;&lt;set $sq2 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 51&gt;&gt;&lt;&lt;set $sq2 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 52&gt;&gt;&lt;&lt;set $sq2 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 53&gt;&gt;&lt;&lt;set $sq2 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 54&gt;&gt;&lt;&lt;set $sq2 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 55&gt;&gt;&lt;&lt;set $sq2 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 56&gt;&gt;&lt;&lt;set $sq2 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 57&gt;&gt;&lt;&lt;set $sq2 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 58&gt;&gt;&lt;&lt;set $sq2 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 59&gt;&gt;&lt;&lt;set $sq2 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 60&gt;&gt;&lt;&lt;set $sq2 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 61&gt;&gt;&lt;&lt;set $sq2 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 62&gt;&gt;&lt;&lt;set $sq2 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 63&gt;&gt;&lt;&lt;set $sq2 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 64&gt;&gt;&lt;&lt;set $sq2 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $sq3 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square3 to random(9, 16)&gt;&gt;\
&lt;&lt;if $square3 is 9&gt;&gt;&lt;&lt;set $sq3 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 10&gt;&gt;&lt;&lt;set $sq3 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 11&gt;&gt;&lt;&lt;set $sq3 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 12&gt;&gt;&lt;&lt;set $sq3 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 13&gt;&gt;&lt;&lt;set $sq3 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 14&gt;&gt;&lt;&lt;set $sq3 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 15&gt;&gt;&lt;&lt;set $sq3 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $square3 is 16&gt;&gt;&lt;&lt;set $sq3 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;
Square 1:  $sq1
Square 2:  $sq2
Square 3:  $sq3

&lt;&lt;dropdown &#x27;$knight_ans&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &#x27;7&#x27; &#x27;8&#x27; &#x27;9&#x27; &#x27;10&#x27; &#x27;11&#x27; &#x27;12&#x27; &#x27;13&#x27; &#x27;14&#x27; &#x27;15&#x27; &#x27;16&#x27; &#x27;17&#x27; &#x27;18&#x27;&gt;&gt;

&lt;&lt;button GO &quot;knight2_ans&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;

&lt;&lt;if $clock eq 5&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 10&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 15&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 30&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 60&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 120&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;\
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;\</tw-passagedata><tw-passagedata pid="25" name="knight2_ans" tags="" position="1052,707">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;script&gt;&gt;
var square1 = State.variables.sq1;
var square2 = State.variables.sq2;
var square3 = State.variables.sq3;
function findCoo(el) {
  return [
    el[1] - 1, // the row value - 1
    el[0].codePointAt() - &#x27;a&#x27;.codePointAt() // the column ascii value - ascii value of a
  ];
}
var [col1,row1] = findCoo(square1);
var [col2,row2] = findCoo(square2);
var [col3,row3] = findCoo(square3);
var krow = row1 - row2;
var kcol = col1 - col2;
var abskrow = (krow &lt; 0) ? -krow : krow;
var abskcol = (kcol &lt; 0) ? -kcol : kcol;
var krow2 = row2 - row3;
var kcol2 = col2 - col3;
var abskrow2 = (krow2 &lt; 0) ? -krow2 : krow2;
var abskcol2 = (kcol2 &lt; 0) ? -kcol2 : kcol2;
var knightmatrix = [
[0,3,2,3,2,3,4,5],
[3,2,1,2,3,4,3,4],
[2,1,4,3,2,3,4,5],
[3,2,3,2,3,4,3,4],
[2,3,2,3,4,3,4,5],
[3,4,3,4,3,4,5,4],
[4,3,4,3,4,5,4,5],
[5,4,5,4,5,4,5,6]]
var ans1 = knightmatrix[abskrow][abskcol]
var ans2 = knightmatrix[abskrow2][abskcol2]
var ans = ans1 + ans2
setup.testFunction = function () {
    return ans;
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;set $var to setup.testFunction()&gt;&gt;\
&lt;&lt;if $var eq $knight_ans&gt;&gt;\
&lt;&lt;set $points to $points + 2.5&gt;&gt;\
Good! You got it right!
&lt;&lt;elseif $var neq $knight_ans&gt;&gt;
&lt;&lt;set $points to $points - 1&gt;&gt;\
Uh, oh. Wrong Answer.
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
position[State.variables.sq3] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
Square 1: $sq1 | Square 2: $sq2 | Square 3: $sq3\
&lt;&lt;/if&gt;&gt;
&lt;&lt;button &quot;Next Puzzle&quot; &quot;knight2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r6&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="26" name="aliencapture" tags="" position="251,605">How quickly can you capture the alien ?
&lt;&lt;set $knight_ans to &quot;&quot;&gt;&gt;\
&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square1 to random(1, 16)&gt;&gt;\
&lt;&lt;if $square1 is 1&gt;&gt;&lt;&lt;set $sq1 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 2&gt;&gt;&lt;&lt;set $sq1 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 3&gt;&gt;&lt;&lt;set $sq1 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 4&gt;&gt;&lt;&lt;set $sq1 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 5&gt;&gt;&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 6&gt;&gt;&lt;&lt;set $sq1 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 7&gt;&gt;&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 8&gt;&gt;&lt;&lt;set $sq1 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 9&gt;&gt;&lt;&lt;set $sq1 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 10&gt;&gt;&lt;&lt;set $sq1 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 11&gt;&gt;&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 12&gt;&gt;&lt;&lt;set $sq1 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 13&gt;&gt;&lt;&lt;set $sq1 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 14&gt;&gt;&lt;&lt;set $sq1 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 15&gt;&gt;&lt;&lt;set $sq1 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $square1 is 16&gt;&gt;&lt;&lt;set $sq1 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $sq2 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $square2 to random(49, 64)&gt;&gt;\
&lt;&lt;if $square2 is 49&gt;&gt;&lt;&lt;set $sq2 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 50&gt;&gt;&lt;&lt;set $sq2 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 51&gt;&gt;&lt;&lt;set $sq2 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 52&gt;&gt;&lt;&lt;set $sq2 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 53&gt;&gt;&lt;&lt;set $sq2 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 54&gt;&gt;&lt;&lt;set $sq2 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 55&gt;&gt;&lt;&lt;set $sq2 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 56&gt;&gt;&lt;&lt;set $sq2 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 57&gt;&gt;&lt;&lt;set $sq2 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 58&gt;&gt;&lt;&lt;set $sq2 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 59&gt;&gt;&lt;&lt;set $sq2 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 60&gt;&gt;&lt;&lt;set $sq2 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 61&gt;&gt;&lt;&lt;set $sq2 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 62&gt;&gt;&lt;&lt;set $sq2 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 63&gt;&gt;&lt;&lt;set $sq2 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $square2 is 64&gt;&gt;&lt;&lt;set $sq2 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;bN&#x27;;
position[State.variables.sq2] = &#x27;bX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;&lt;&lt;set $kill to &quot;&quot;&gt;&gt;\
&lt;&lt;dropdown &#x27;$kill&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &gt;&gt;Moves &lt;&lt;button &quot;Capture&quot; &quot;aliencapture_ans&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;
&lt;&lt;if $clock eq 5&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 10&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 15&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 30&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 60&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;elseif $clock eq 120&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;timeout&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;</tw-passagedata><tw-passagedata pid="27" name="aliencapture_ans" tags="" position="253,707">&lt;&lt;script&gt;&gt;
var square1 = State.variables.sq1;
var square2 = State.variables.sq2;
function findCoo(el) {
  return [
    el[1] - 1, // the row value - 1
    el[0].codePointAt() - &#x27;a&#x27;.codePointAt() // the column ascii value - ascii value of a
  ];
}
var [col1,row1] = findCoo(square1);
var [col2,row2] = findCoo(square2);
var krow = row1 - row2;
var kcol = col1 - col2;
var abskrow = (krow &lt; 0) ? -krow : krow;
var abskcol = (kcol &lt; 0) ? -kcol : kcol;
var knightmatrix = [
[&quot;0&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;3&quot;,&quot;2&quot;,&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;],
[&quot;2&quot;,&quot;1&quot;,&quot;4&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;],
[&quot;2&quot;,&quot;3&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;],
[&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;,&quot;5&quot;],
[&quot;5&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;,&quot;5&quot;,&quot;4&quot;,&quot;5&quot;,&quot;6&quot;]]
var ans = knightmatrix[abskrow][abskcol]
setup.testFunction = function () {
    return ans;
};
&lt;&lt;/script&gt;&gt;\
&lt;&lt;set $var to setup.testFunction()&gt;&gt;\
&lt;&lt;if $var is $kill&gt;&gt;\
&lt;&lt;set $points to $points + 1&gt;&gt;\
Great! You got it right!
&lt;&lt;elseif $var neq $kill&gt;&gt;\
&lt;&lt;set $points to $points - 1&gt;&gt;\
Uh, oh. Wrong Answer.
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;bN&#x27;;
position[State.variables.sq2] = &#x27;bX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;
&lt;&lt;button &quot;Next Puzzle&quot; &quot;aliencapture&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="28" name="r1" tags="" position="1282,114">Game 1: Square Colours
Goal: Find out the colour of a given square.

&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="29" name="r2" tags="" position="1389,116">Game 2: Alien Capture
Goal: Find out the minimum number of moves it would take to capture the Alien.
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;bN&#x27;;
position[State.variables.sq2] = &#x27;bX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="30" name="r3" tags="" position="1281,223">Level: Medium
Game 1: Two Squares
Goal: Find out if the two squares are of the same colour. If they are same, click yes. If not, click No. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wX&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="31" name="r4" tags="" position="1390,221">Game 2: Bishop Diagonal
Goal: Find out if the two squares are on the same diagonal. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq2] = &#x27;wX&#x27;;
position[State.variables.sq3] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="32" name="r5" tags="" position="1277,327">Level: Difficult
Game 1: Knight Moves 1
Goal: Find out the minimum number of moves it would require for your knight to travel from square 1 to square 2. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="33" name="r6" tags="" position="1393,324">Game 2: Knight Moves 2
Goal: Find out the minimum number of moves it would require for your knight to travel from square 1 to square 2 to square 3. Remember, you should go from square 1 to square 2 to square 3 and not in any other order.
Example: $sq1 to $sq2 to $sq3
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wX&#x27;;
position[State.variables.sq3] = &#x27;wX&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="34" name="timeout" tags="" position="20,442">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
Time out! 
You lose one point. 
&lt;&lt;set $points to $points - 1&gt;&gt;
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
Total Score: $points
&lt;&lt;button &quot;Play Again&quot; &quot;welcome2&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;
&lt;&lt;button &quot;Timer Settings&quot; &quot;clock&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="35" name="memory1" tags="" position="676,610">Memorize the position:
&lt;&lt;set $knight to &quot;&quot;&gt;&gt;\
&lt;&lt;set $sq1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $bishop to &quot;&quot;&gt;&gt;\
&lt;&lt;set $sq2 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $king to &quot;&quot;&gt;&gt;\
&lt;&lt;set $sq3 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $rook to &quot;&quot;&gt;&gt;\
&lt;&lt;set $sq4 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $knight to random(1,16)&gt;&gt;\
&lt;&lt;if $knight is 1&gt;&gt;&lt;&lt;set $sq1 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 2&gt;&gt;&lt;&lt;set $sq1 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 3&gt;&gt;&lt;&lt;set $sq1 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 4&gt;&gt;&lt;&lt;set $sq1 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 5&gt;&gt;&lt;&lt;set $sq1 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 6&gt;&gt;&lt;&lt;set $sq1 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 7&gt;&gt;&lt;&lt;set $sq1 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 8&gt;&gt;&lt;&lt;set $sq1 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 9&gt;&gt;&lt;&lt;set $sq1 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 10&gt;&gt;&lt;&lt;set $sq1 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 11&gt;&gt;&lt;&lt;set $sq1 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 12&gt;&gt;&lt;&lt;set $sq1 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 13&gt;&gt;&lt;&lt;set $sq1 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 14&gt;&gt;&lt;&lt;set $sq1 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 15&gt;&gt;&lt;&lt;set $sq1 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 16&gt;&gt;&lt;&lt;set $sq1 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 17&gt;&gt;&lt;&lt;set $sq1 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 18&gt;&gt;&lt;&lt;set $sq1 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 19&gt;&gt;&lt;&lt;set $sq1 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 20&gt;&gt;&lt;&lt;set $sq1 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 21&gt;&gt;&lt;&lt;set $sq1 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 22&gt;&gt;&lt;&lt;set $sq1 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 23&gt;&gt;&lt;&lt;set $sq1 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 24&gt;&gt;&lt;&lt;set $sq1 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 25&gt;&gt;&lt;&lt;set $sq1 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 26&gt;&gt;&lt;&lt;set $sq1 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 27&gt;&gt;&lt;&lt;set $sq1 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 28&gt;&gt;&lt;&lt;set $sq1 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 29&gt;&gt;&lt;&lt;set $sq1 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 30&gt;&gt;&lt;&lt;set $sq1 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 31&gt;&gt;&lt;&lt;set $sq1 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 32&gt;&gt;&lt;&lt;set $sq1 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 33&gt;&gt;&lt;&lt;set $sq1 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 34&gt;&gt;&lt;&lt;set $sq1 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 35&gt;&gt;&lt;&lt;set $sq1 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 36&gt;&gt;&lt;&lt;set $sq1 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 37&gt;&gt;&lt;&lt;set $sq1 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 38&gt;&gt;&lt;&lt;set $sq1 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 39&gt;&gt;&lt;&lt;set $sq1 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 40&gt;&gt;&lt;&lt;set $sq1 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 41&gt;&gt;&lt;&lt;set $sq1 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 42&gt;&gt;&lt;&lt;set $sq1 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 43&gt;&gt;&lt;&lt;set $sq1 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 44&gt;&gt;&lt;&lt;set $sq1 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 45&gt;&gt;&lt;&lt;set $sq1 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 46&gt;&gt;&lt;&lt;set $sq1 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 47&gt;&gt;&lt;&lt;set $sq1 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 48&gt;&gt;&lt;&lt;set $sq1 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 49&gt;&gt;&lt;&lt;set $sq1 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 50&gt;&gt;&lt;&lt;set $sq1 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 51&gt;&gt;&lt;&lt;set $sq1 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 52&gt;&gt;&lt;&lt;set $sq1 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 53&gt;&gt;&lt;&lt;set $sq1 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 54&gt;&gt;&lt;&lt;set $sq1 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 55&gt;&gt;&lt;&lt;set $sq1 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 56&gt;&gt;&lt;&lt;set $sq1 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 57&gt;&gt;&lt;&lt;set $sq1 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 58&gt;&gt;&lt;&lt;set $sq1 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 59&gt;&gt;&lt;&lt;set $sq1 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 60&gt;&gt;&lt;&lt;set $sq1 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 61&gt;&gt;&lt;&lt;set $sq1 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 62&gt;&gt;&lt;&lt;set $sq1 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 63&gt;&gt;&lt;&lt;set $sq1 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $knight is 64&gt;&gt;&lt;&lt;set $sq1 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $bishop to random(17,32)&gt;&gt;\
&lt;&lt;if $bishop is 1&gt;&gt;&lt;&lt;set $sq2 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 2&gt;&gt;&lt;&lt;set $sq2 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 3&gt;&gt;&lt;&lt;set $sq2 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 4&gt;&gt;&lt;&lt;set $sq2 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 5&gt;&gt;&lt;&lt;set $sq2 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 6&gt;&gt;&lt;&lt;set $sq2 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 7&gt;&gt;&lt;&lt;set $sq2 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 8&gt;&gt;&lt;&lt;set $sq2 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 9&gt;&gt;&lt;&lt;set $sq2 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 10&gt;&gt;&lt;&lt;set $sq2 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 11&gt;&gt;&lt;&lt;set $sq2 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 12&gt;&gt;&lt;&lt;set $sq2 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 13&gt;&gt;&lt;&lt;set $sq2 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 14&gt;&gt;&lt;&lt;set $sq2 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 15&gt;&gt;&lt;&lt;set $sq2 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 16&gt;&gt;&lt;&lt;set $sq2 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 17&gt;&gt;&lt;&lt;set $sq2 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 18&gt;&gt;&lt;&lt;set $sq2 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 19&gt;&gt;&lt;&lt;set $sq2 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 20&gt;&gt;&lt;&lt;set $sq2 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 21&gt;&gt;&lt;&lt;set $sq2 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 22&gt;&gt;&lt;&lt;set $sq2 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 23&gt;&gt;&lt;&lt;set $sq2 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 24&gt;&gt;&lt;&lt;set $sq2 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 25&gt;&gt;&lt;&lt;set $sq2 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 26&gt;&gt;&lt;&lt;set $sq2 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 27&gt;&gt;&lt;&lt;set $sq2 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 28&gt;&gt;&lt;&lt;set $sq2 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 29&gt;&gt;&lt;&lt;set $sq2 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 30&gt;&gt;&lt;&lt;set $sq2 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 31&gt;&gt;&lt;&lt;set $sq2 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 32&gt;&gt;&lt;&lt;set $sq2 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 33&gt;&gt;&lt;&lt;set $sq2 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 34&gt;&gt;&lt;&lt;set $sq2 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 35&gt;&gt;&lt;&lt;set $sq2 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 36&gt;&gt;&lt;&lt;set $sq2 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 37&gt;&gt;&lt;&lt;set $sq2 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 38&gt;&gt;&lt;&lt;set $sq2 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 39&gt;&gt;&lt;&lt;set $sq2 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 40&gt;&gt;&lt;&lt;set $sq2 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 41&gt;&gt;&lt;&lt;set $sq2 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 42&gt;&gt;&lt;&lt;set $sq2 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 43&gt;&gt;&lt;&lt;set $sq2 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 44&gt;&gt;&lt;&lt;set $sq2 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 45&gt;&gt;&lt;&lt;set $sq2 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 46&gt;&gt;&lt;&lt;set $sq2 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 47&gt;&gt;&lt;&lt;set $sq2 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 48&gt;&gt;&lt;&lt;set $sq2 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 49&gt;&gt;&lt;&lt;set $sq2 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 50&gt;&gt;&lt;&lt;set $sq2 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 51&gt;&gt;&lt;&lt;set $sq2 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 52&gt;&gt;&lt;&lt;set $sq2 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 53&gt;&gt;&lt;&lt;set $sq2 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 54&gt;&gt;&lt;&lt;set $sq2 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 55&gt;&gt;&lt;&lt;set $sq2 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 56&gt;&gt;&lt;&lt;set $sq2 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 57&gt;&gt;&lt;&lt;set $sq2 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 58&gt;&gt;&lt;&lt;set $sq2 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 59&gt;&gt;&lt;&lt;set $sq2 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 60&gt;&gt;&lt;&lt;set $sq2 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 61&gt;&gt;&lt;&lt;set $sq2 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 62&gt;&gt;&lt;&lt;set $sq2 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 63&gt;&gt;&lt;&lt;set $sq2 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $bishop is 64&gt;&gt;&lt;&lt;set $sq2 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $king to random(33,48)&gt;&gt;\
&lt;&lt;if $king is 1&gt;&gt;&lt;&lt;set $sq3 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 2&gt;&gt;&lt;&lt;set $sq3 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 3&gt;&gt;&lt;&lt;set $sq3 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 4&gt;&gt;&lt;&lt;set $sq3 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 5&gt;&gt;&lt;&lt;set $sq3 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 6&gt;&gt;&lt;&lt;set $sq3 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 7&gt;&gt;&lt;&lt;set $sq3 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 8&gt;&gt;&lt;&lt;set $sq3 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $king is 9&gt;&gt;&lt;&lt;set $sq3 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 10&gt;&gt;&lt;&lt;set $sq3 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 11&gt;&gt;&lt;&lt;set $sq3 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 12&gt;&gt;&lt;&lt;set $sq3 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 13&gt;&gt;&lt;&lt;set $sq3 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 14&gt;&gt;&lt;&lt;set $sq3 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 15&gt;&gt;&lt;&lt;set $sq3 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 16&gt;&gt;&lt;&lt;set $sq3 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $king is 17&gt;&gt;&lt;&lt;set $sq3 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 18&gt;&gt;&lt;&lt;set $sq3 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 19&gt;&gt;&lt;&lt;set $sq3 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 20&gt;&gt;&lt;&lt;set $sq3 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 21&gt;&gt;&lt;&lt;set $sq3 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 22&gt;&gt;&lt;&lt;set $sq3 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 23&gt;&gt;&lt;&lt;set $sq3 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 24&gt;&gt;&lt;&lt;set $sq3 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $king is 25&gt;&gt;&lt;&lt;set $sq3 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 26&gt;&gt;&lt;&lt;set $sq3 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 27&gt;&gt;&lt;&lt;set $sq3 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 28&gt;&gt;&lt;&lt;set $sq3 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 29&gt;&gt;&lt;&lt;set $sq3 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 30&gt;&gt;&lt;&lt;set $sq3 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 31&gt;&gt;&lt;&lt;set $sq3 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 32&gt;&gt;&lt;&lt;set $sq3 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $king is 33&gt;&gt;&lt;&lt;set $sq3 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 34&gt;&gt;&lt;&lt;set $sq3 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 35&gt;&gt;&lt;&lt;set $sq3 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 36&gt;&gt;&lt;&lt;set $sq3 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 37&gt;&gt;&lt;&lt;set $sq3 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 38&gt;&gt;&lt;&lt;set $sq3 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 39&gt;&gt;&lt;&lt;set $sq3 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 40&gt;&gt;&lt;&lt;set $sq3 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $king is 41&gt;&gt;&lt;&lt;set $sq3 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 42&gt;&gt;&lt;&lt;set $sq3 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 43&gt;&gt;&lt;&lt;set $sq3 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 44&gt;&gt;&lt;&lt;set $sq3 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 45&gt;&gt;&lt;&lt;set $sq3 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 46&gt;&gt;&lt;&lt;set $sq3 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 47&gt;&gt;&lt;&lt;set $sq3 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 48&gt;&gt;&lt;&lt;set $sq3 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $king is 49&gt;&gt;&lt;&lt;set $sq3 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 50&gt;&gt;&lt;&lt;set $sq3 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 51&gt;&gt;&lt;&lt;set $sq3 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 52&gt;&gt;&lt;&lt;set $sq3 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 53&gt;&gt;&lt;&lt;set $sq3 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 54&gt;&gt;&lt;&lt;set $sq3 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 55&gt;&gt;&lt;&lt;set $sq3 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 56&gt;&gt;&lt;&lt;set $sq3 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $king is 57&gt;&gt;&lt;&lt;set $sq3 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 58&gt;&gt;&lt;&lt;set $sq3 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 59&gt;&gt;&lt;&lt;set $sq3 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 60&gt;&gt;&lt;&lt;set $sq3 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 61&gt;&gt;&lt;&lt;set $sq3 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 62&gt;&gt;&lt;&lt;set $sq3 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 63&gt;&gt;&lt;&lt;set $sq3 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $king is 64&gt;&gt;&lt;&lt;set $sq3 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;set $rook to random(49,64)&gt;&gt;\
&lt;&lt;if $rook is 1&gt;&gt;&lt;&lt;set $sq4 to &quot;a1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 2&gt;&gt;&lt;&lt;set $sq4 to &quot;b1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 3&gt;&gt;&lt;&lt;set $sq4 to &quot;c1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 4&gt;&gt;&lt;&lt;set $sq4 to &quot;d1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 5&gt;&gt;&lt;&lt;set $sq4 to &quot;e1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 6&gt;&gt;&lt;&lt;set $sq4 to &quot;f1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 7&gt;&gt;&lt;&lt;set $sq4 to &quot;g1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 8&gt;&gt;&lt;&lt;set $sq4 to &quot;h1&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 9&gt;&gt;&lt;&lt;set $sq4 to &quot;h2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 10&gt;&gt;&lt;&lt;set $sq4 to &quot;g2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 11&gt;&gt;&lt;&lt;set $sq4 to &quot;f2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 12&gt;&gt;&lt;&lt;set $sq4 to &quot;e2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 13&gt;&gt;&lt;&lt;set $sq4 to &quot;d2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 14&gt;&gt;&lt;&lt;set $sq4 to &quot;c2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 15&gt;&gt;&lt;&lt;set $sq4 to &quot;b2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 16&gt;&gt;&lt;&lt;set $sq4 to &quot;a2&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 17&gt;&gt;&lt;&lt;set $sq4 to &quot;a3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 18&gt;&gt;&lt;&lt;set $sq4 to &quot;b3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 19&gt;&gt;&lt;&lt;set $sq4 to &quot;c3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 20&gt;&gt;&lt;&lt;set $sq4 to &quot;d3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 21&gt;&gt;&lt;&lt;set $sq4 to &quot;e3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 22&gt;&gt;&lt;&lt;set $sq4 to &quot;f3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 23&gt;&gt;&lt;&lt;set $sq4 to &quot;g3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 24&gt;&gt;&lt;&lt;set $sq4 to &quot;h3&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 25&gt;&gt;&lt;&lt;set $sq4 to &quot;h4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 26&gt;&gt;&lt;&lt;set $sq4 to &quot;g4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 27&gt;&gt;&lt;&lt;set $sq4 to &quot;f4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 28&gt;&gt;&lt;&lt;set $sq4 to &quot;e4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 29&gt;&gt;&lt;&lt;set $sq4 to &quot;d4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 30&gt;&gt;&lt;&lt;set $sq4 to &quot;c4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 31&gt;&gt;&lt;&lt;set $sq4 to &quot;b4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 32&gt;&gt;&lt;&lt;set $sq4 to &quot;a4&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 33&gt;&gt;&lt;&lt;set $sq4 to &quot;a5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 34&gt;&gt;&lt;&lt;set $sq4 to &quot;b5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 35&gt;&gt;&lt;&lt;set $sq4 to &quot;c5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 36&gt;&gt;&lt;&lt;set $sq4 to &quot;d5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 37&gt;&gt;&lt;&lt;set $sq4 to &quot;e5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 38&gt;&gt;&lt;&lt;set $sq4 to &quot;f5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 39&gt;&gt;&lt;&lt;set $sq4 to &quot;g5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 40&gt;&gt;&lt;&lt;set $sq4 to &quot;h5&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 41&gt;&gt;&lt;&lt;set $sq4 to &quot;h6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 42&gt;&gt;&lt;&lt;set $sq4 to &quot;g6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 43&gt;&gt;&lt;&lt;set $sq4 to &quot;f6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 44&gt;&gt;&lt;&lt;set $sq4 to &quot;e6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 45&gt;&gt;&lt;&lt;set $sq4 to &quot;d6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 46&gt;&gt;&lt;&lt;set $sq4 to &quot;c6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 47&gt;&gt;&lt;&lt;set $sq4 to &quot;b6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 48&gt;&gt;&lt;&lt;set $sq4 to &quot;a6&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 49&gt;&gt;&lt;&lt;set $sq4 to &quot;a7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 50&gt;&gt;&lt;&lt;set $sq4 to &quot;b7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 51&gt;&gt;&lt;&lt;set $sq4 to &quot;c7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 52&gt;&gt;&lt;&lt;set $sq4 to &quot;d7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 53&gt;&gt;&lt;&lt;set $sq4 to &quot;e7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 54&gt;&gt;&lt;&lt;set $sq4 to &quot;f7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 55&gt;&gt;&lt;&lt;set $sq4 to &quot;g7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 56&gt;&gt;&lt;&lt;set $sq4 to &quot;h7&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 57&gt;&gt;&lt;&lt;set $sq4 to &quot;h8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 58&gt;&gt;&lt;&lt;set $sq4 to &quot;g8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 59&gt;&gt;&lt;&lt;set $sq4 to &quot;f8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 60&gt;&gt;&lt;&lt;set $sq4 to &quot;e8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 61&gt;&gt;&lt;&lt;set $sq4 to &quot;d8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 62&gt;&gt;&lt;&lt;set $sq4 to &quot;c8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 63&gt;&gt;&lt;&lt;set $sq4 to &quot;b8&quot;&gt;&gt;\
&lt;&lt;elseif $rook is 64&gt;&gt;&lt;&lt;set $sq4 to &quot;a8&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wB&#x27;;
position[State.variables.sq3] = &#x27;wK&#x27;;
position[State.variables.sq4] = &#x27;wR&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;memoryq&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;</tw-passagedata><tw-passagedata pid="36" name="memoryq" tags="" position="670,715">&lt;&lt;set $file1 to &quot;&quot;&gt;&gt;&lt;&lt;set $rank1 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $file2 to &quot;&quot;&gt;&gt;&lt;&lt;set $rank2 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $file3 to &quot;&quot;&gt;&gt;&lt;&lt;set $rank3 to &quot;&quot;&gt;&gt;\
&lt;&lt;set $file4 to &quot;&quot;&gt;&gt;&lt;&lt;set $rank4 to &quot;&quot;&gt;&gt;\
White King:
&lt;&lt;dropdown &#x27;$file3&#x27; &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27; &#x27;d&#x27; &#x27;e&#x27; &#x27;f&#x27; &#x27;g&#x27; &#x27;h&#x27;&gt;&gt;&lt;&lt;dropdown &#x27;$rank3&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &#x27;7&#x27; &#x27;8&#x27;&gt;&gt;

White Rook:
&lt;&lt;dropdown &#x27;$file4&#x27; &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27; &#x27;d&#x27; &#x27;e&#x27; &#x27;f&#x27; &#x27;g&#x27; &#x27;h&#x27;&gt;&gt;&lt;&lt;dropdown &#x27;$rank4&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &#x27;7&#x27; &#x27;8&#x27;&gt;&gt;

White Knight:
&lt;&lt;dropdown &#x27;$file1&#x27; &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27; &#x27;d&#x27; &#x27;e&#x27; &#x27;f&#x27; &#x27;g&#x27; &#x27;h&#x27;&gt;&gt;&lt;&lt;dropdown &#x27;$rank1&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &#x27;7&#x27; &#x27;8&#x27;&gt;&gt;

White Bishop:
&lt;&lt;dropdown &#x27;$file2&#x27; &#x27;a&#x27; &#x27;b&#x27; &#x27;c&#x27; &#x27;d&#x27; &#x27;e&#x27; &#x27;f&#x27; &#x27;g&#x27; &#x27;h&#x27;&gt;&gt;&lt;&lt;dropdown &#x27;$rank2&#x27; &#x27;1&#x27; &#x27;2&#x27; &#x27;3&#x27; &#x27;4&#x27; &#x27;5&#x27; &#x27;6&#x27; &#x27;7&#x27; &#x27;8&#x27;&gt;&gt;

&lt;&lt;button GO &quot;memorya&quot;&gt;&gt; &lt;&lt;/button&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;</tw-passagedata><tw-passagedata pid="37" name="memorya" tags="" position="675,820">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
&lt;&lt;set $p1 to  $file1 + $rank1 + $file2 + $rank2 + $file3 + $rank3 + $file4 + $rank4&gt;&gt;\
&lt;&lt;set $a1 to  $sq1 + $sq2 + $sq3 + $sq4&gt;&gt;\
&lt;&lt;if $p1 is $a1&gt;&gt;\
&lt;&lt;set $points to $points + 1.5&gt;&gt;\
Success!
&lt;&lt;elseif $p1 neq $a1&gt;&gt;
&lt;&lt;set $points to $points - 1&gt;&gt;\
Wrong Answer. 
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wB&#x27;;
position[State.variables.sq3] = &#x27;wK&#x27;;
position[State.variables.sq4] = &#x27;wR&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
&lt;&lt;button &quot;Next Puzzle&quot; &quot;memory1&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r7&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="38" name="r7" tags="" position="1278,434">Game 3: Memory I
Goal: Memorize the given position. This level contains 4 pieces - King, Rook, Bishop &amp; Knight. Set the square name for each piece in the respected dropdown field. This exercise has a fixed timer setting of ten seconds designed to challenge your short term memory.

&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
delete postdisplay[taskName]; // single-use task
var position = {};
position[State.variables.sq1] = &#x27;wN&#x27;;
position[State.variables.sq2] = &#x27;wB&#x27;;
position[State.variables.sq3] = &#x27;wK&#x27;;
position[State.variables.sq4] = &#x27;wR&#x27;;
ChessBoard(&#x27;board&#x27;, position);
};
&lt;&lt;/script&gt;&gt;

&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="39" name="memory2" tags="" position="1163,596">Memorize the position:
&lt;&lt;set $rp to random(1,20)&gt;&gt;\
&lt;&lt;set $posfen to &quot;&quot;&gt;&gt;\
&lt;&lt;if $rp is 1&gt;&gt;\
&lt;&lt;set $posfen to &quot;2K5/8/p4P2/k3p3/7p/8/1n6/7B&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 2&gt;&gt;\
&lt;&lt;set $posfen to &quot;6N1/5K2/8/4R3/8/1nk5/BN2p3/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 3&gt;&gt;\
&lt;&lt;set $posfen to &quot;8/2B5/N2p4/4R3/1p6/6Kp/8/5k2&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 4&gt;&gt;\
&lt;&lt;set $posfen to &quot;6N1/5K2/8/4R3/8/1nk5/BN2p3/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 5&gt;&gt;\
&lt;&lt;set $posfen to &quot;3N4/1p6/8/5k2/8/P3P3/n1b1K3/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 6&gt;&gt;\
&lt;&lt;set $posfen to &quot;6k1/2B3p1/P1K5/8/8/2p2n2/4p1N1/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 7&gt;&gt;\
&lt;&lt;set $posfen to &quot;8/8/P7/8/3k4/4r2p/8/2K5&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 8&gt;&gt;\
&lt;&lt;set $posfen to &quot;3N4/8/6K1/p1p5/8/5pPP/8/3k4&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 9&gt;&gt;\
&lt;&lt;set $posfen to &quot;8/8/1P6/1p2N3/4k3/5p1n/4p3/K7&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 10&gt;&gt;\
&lt;&lt;set $posfen to &quot;6r1/8/4B3/6pp/1b1K4/5k2/4p3/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 11&gt;&gt;\
&lt;&lt;set $posfen to &quot;2R5/1p6/7b/8/8/3K2k1/6np/R7&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 12&gt;&gt;\
&lt;&lt;set $posfen to &quot;8/2Bp4/6k1/1pp5/8/2p5/4p3/2K5&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 13&gt;&gt;\
&lt;&lt;set $posfen to &quot;6b1/8/5p1p/5k2/4R3/1p6/1KP5/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 14&gt;&gt;\
&lt;&lt;set $posfen to &quot;2R5/4p2p/8/8/4Kp2/4B3/6n1/5k2&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 15&gt;&gt;\
&lt;&lt;set $posfen to &quot;4r3/8/6P1/8/2p1k1bK/7p/8/6n1&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 16&gt;&gt;\
&lt;&lt;set $posfen to &quot;6r1/8/4k3/K7/pn6/3p4/3P4/6N1&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 17&gt;&gt;\
&lt;&lt;set $posfen to &quot;3B3K/5P2/4p1k1/6p1/8/8/7b/7B&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 18&gt;&gt;\
&lt;&lt;set $posfen to &quot;4B3/2P5/8/3P4/8/6pR/N7/4k1K1&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 19&gt;&gt;\
&lt;&lt;set $posfen to &quot;8/8/2k1P2B/5N2/7r/4K2B/7n/8&quot;&gt;&gt;\
&lt;&lt;elseif $rp is 20&gt;&gt;\
&lt;&lt;set $posfen to &quot;8/n7/7B/2K5/1p6/8/p3kP2/3R4&quot;&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;div id=&quot;board&quot; style=&quot;width: 400px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
    delete postdisplay[taskName]; // single-use task
    ChessBoard(&#x27;board&#x27;, {
        position : State.variables.posfen
    });
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;if $clock eq 5&gt;&gt;\
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w0&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;&lt;timed 5s&gt;&gt;&lt;&lt;goto &quot;rp_ans&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;\
&lt;&lt;elseif $clock eq 10&gt;&gt;\
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w1&quot;&gt;&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;timed 10s&gt;&gt;&lt;&lt;goto &quot;rp_ans&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;\
&lt;&lt;elseif $clock eq 15&gt;&gt;\
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w2&quot;&gt;&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;timed 15s&gt;&gt;&lt;&lt;goto &quot;rp_ans&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;\
&lt;&lt;elseif $clock eq 30&gt;&gt;\
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w3&quot;&gt;&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;timed 30s&gt;&gt;&lt;&lt;goto &quot;rp_ans&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;\
&lt;&lt;elseif $clock eq 60&gt;&gt;\
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w4&quot;&gt;&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;timed 60s&gt;&gt;&lt;&lt;goto &quot;rp_ans&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;\
&lt;&lt;elseif $clock eq 120&gt;&gt;\
&lt;div class=&quot;time-bar&quot;&gt;&lt;span class=&quot;w5&quot;&gt;&lt;/span&gt;&lt;/div&gt;\
&lt;&lt;timed 120s&gt;&gt;&lt;&lt;goto &quot;rp_ans&quot;&gt;&gt;&lt;&lt;/timed&gt;&gt;\
&lt;&lt;/if&gt;&gt;\
&lt;&lt;audio &quot;ticktock&quot; play&gt;&gt;
&lt;&lt;audio &quot;ticktock&quot; loop&gt;&gt;
</tw-passagedata><tw-passagedata pid="40" name="rp_ans" tags="" position="1161,703">&lt;&lt;audio &quot;ticktock&quot; stop&gt;&gt;\
Set Position:
&lt;div id=&quot;board&quot; style=&quot;width: 400px&quot;&gt;&lt;/div&gt;
&lt;button id=&quot;positionBtn&quot;&gt;Check Answer&lt;/button&gt;
&lt;&lt;script&gt;&gt;

postdisplay[&#x27;init-chess-board&#x27;] = function(taskName) {
    delete postdisplay[taskName]; // single-use task

    // Set up the board.
    var board = ChessBoard(&#x27;board&#x27;, {
        draggable    : true,
        dropOffBoard : &#x27;trash&#x27;,
        sparePieces  : true
    });

    // Set up some utility functions.
      
 function getPosition() {
 State.variables[&#x27;position&#x27;] = board.position();
 State.variables[&#x27;fen&#x27;] = board.fen();
 state.display(&quot;rp_validate&quot;, this);

	}

    // Attach event handlers to the buttons
    $(&#x27;#positionBtn&#x27;).on(&#x27;click&#x27;, getPosition);
	
	
};


&lt;&lt;/script&gt;&gt;
</tw-passagedata><tw-passagedata pid="41" name="rp_validate" tags="" position="1163,816">&lt;&lt;if $rp is 1 and $fen is &quot;2K5/8/p4P2/k3p3/7p/8/1n6/7B&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 1 and $fen neq &quot;2K5/8/p4P2/k3p3/7p/8/1n6/7B&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 2 and $fen is &quot;6N1/5K2/8/4R3/8/1nk5/BN2p3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 2 and $fen neq &quot;6N1/5K2/8/4R3/8/1nk5/BN2p3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 3 and $fen is &quot;8/2B5/N2p4/4R3/1p6/6Kp/8/5k2&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 3 and $fen neq &quot;8/2B5/N2p4/4R3/1p6/6Kp/8/5k2&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 4 and $fen is &quot;6N1/5K2/8/4R3/8/1nk5/BN2p3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 4 and $fen neq &quot;6N1/5K2/8/4R3/8/1nk5/BN2p3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 5 and $fen is &quot;3N4/1p6/8/5k2/8/P3P3/n1b1K3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 5 and $fen neq &quot;3N4/1p6/8/5k2/8/P3P3/n1b1K3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 6 and $fen is &quot;6k1/2B3p1/P1K5/8/8/2p2n2/4p1N1/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 6 and $fen neq &quot;6k1/2B3p1/P1K5/8/8/2p2n2/4p1N1/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 7 and $fen is &quot;8/8/P7/8/3k4/4r2p/8/2K5&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 7 and $fen neq &quot;8/8/P7/8/3k4/4r2p/8/2K5&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 8 and $fen is &quot;3N4/8/6K1/p1p5/8/5pPP/8/3k4&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 8 and $fen neq &quot;3N4/8/6K1/p1p5/8/5pPP/8/3k4&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 9 and $fen is &quot;8/8/1P6/1p2N3/4k3/5p1n/4p3/K7&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 9 and $fen neq &quot;8/8/1P6/1p2N3/4k3/5p1n/4p3/K7&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 10 and $fen is &quot;6r1/8/4B3/6pp/1b1K4/5k2/4p3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 10 and $fen neq &quot;6r1/8/4B3/6pp/1b1K4/5k2/4p3/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 11 and $fen is &quot;2R5/1p6/7b/8/8/3K2k1/6np/R7&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 11 and $fen neq &quot;2R5/1p6/7b/8/8/3K2k1/6np/R7&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 12 and $fen is &quot;8/2Bp4/6k1/1pp5/8/2p5/4p3/2K5&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 12 and $fen neq &quot;8/2Bp4/6k1/1pp5/8/2p5/4p3/2K5&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 13 and $fen is &quot;6b1/8/5p1p/5k2/4R3/1p6/1KP5/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 13 and $fen neq &quot;6b1/8/5p1p/5k2/4R3/1p6/1KP5/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 14 and $fen is &quot;2R5/4p2p/8/8/4Kp2/4B3/6n1/5k2&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 14 and $fen neq &quot;2R5/4p2p/8/8/4Kp2/4B3/6n1/5k2&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 15 and $fen is &quot;4r3/8/6P1/8/2p1k1bK/7p/8/6n1&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 15 and $fen neq &quot;4r3/8/6P1/8/2p1k1bK/7p/8/6n1&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 16 and $fen is &quot;6r1/8/4k3/K7/pn6/3p4/3P4/6N1&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 16 and $fen neq &quot;6r1/8/4k3/K7/pn6/3p4/3P4/6N1&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 17 and $fen is &quot;3B3K/5P2/4p1k1/6p1/8/8/7b/7B&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 17 and $fen neq &quot;3B3K/5P2/4p1k1/6p1/8/8/7b/7B&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 18 and $fen is &quot;4B3/2P5/8/3P4/8/6pR/N7/4k1K1&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 18 and $fen neq &quot;4B3/2P5/8/3P4/8/6pR/N7/4k1K1&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 19 and $fen is &quot;8/8/2k1P2B/5N2/7r/4K2B/7n/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 19 and $fen neq &quot;8/8/2k1P2B/5N2/7r/4K2B/7n/8&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;elseif $rp is 20 and $fen is &quot;8/n7/7B/2K5/1p6/8/p3kP2/3R4&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_win&quot;&gt;&gt;
&lt;&lt;elseif $rp is 20 and $fen neq &quot;8/n7/7B/2K5/1p6/8/p3kP2/3R4&quot;&gt;&gt;
&lt;&lt;goto &quot;rp_loss&quot;&gt;&gt;
&lt;&lt;/if&gt;&gt;
</tw-passagedata><tw-passagedata pid="42" name="rp_win" tags="" position="1158,920">&lt;&lt;set $points to $points + 3&gt;&gt;\
Correct!
&lt;&lt;button &quot;Next Puzzle&quot; &quot;memory2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r8&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="43" name="rp_loss" tags="" position="1158,1024">&lt;&lt;set $points to $points - 1&gt;&gt;\
Wrong Answer! 
&lt;div id=&quot;board&quot; style=&quot;width: 400px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
    delete postdisplay[taskName]; // single-use task
    ChessBoard(&#x27;board&#x27;, {
        position : State.variables.posfen
    });
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Next Puzzle&quot; &quot;memory2&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;
&lt;&lt;if $points lt 0&gt;&gt;&lt;&lt;set $points to 0&gt;&gt;&lt;&lt;endif&gt;&gt;\
Total Points: $points
&lt;&lt;button &quot;Help&quot; &quot;r8&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="r8" tags="" position="1395,429">Hard: Memory Challenge 2
Goal: Memorize the given position. This level contains at least 8 pieces - King, Rook, Bishop, Knight &amp; Pawns. Change timer settings if you find the level difficult.

&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;div id=&quot;board&quot; style=&quot;width: 300px&quot;&gt;&lt;/div&gt;\
&lt;&lt;script&gt;&gt;
postdisplay[&#x27;init-chess-board&#x27;] = function (taskName) {
    delete postdisplay[taskName]; // single-use task
    ChessBoard(&#x27;board&#x27;, {
        position : &#x27;2K5/8/p4P2/k3p3/7p/8/1n6/7B&#x27;
    });
};
&lt;&lt;/script&gt;&gt;
&lt;&lt;button &quot;Rules&quot; &quot;rules&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;&lt;&lt;button &quot;Menu&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata><tw-passagedata pid="45" name="about" tags="" position="21,546">Hey :) 
Thanks for trying out Ghost Pieces app. My name is Arun, and I teach chess at Pondicherry, a small coastal city in southern India. From my personal experience as a coach, I find that the ability to visualize moves clearly and a strong short-term memory (remember where you parked your car or kept that house key?) form a strong fundamental basis for the skill of calculation. I learned a bit of programming and with help from open source communities, I was able to design (and continuously improve) this app. I hope that this little piece of programme will help you get better at calculation. My best wishes :) 

If you find any bug or would like to suggest features, feel free to contact me at arunjchess@gmail.com 

Also, it would be great if you can leave a review on play store! &lt;a href=&quot;https://play.google.com/store/apps/details?id=ghost.pieces.free&quot;&gt;Visit Play Store&lt;/a&gt;

Thank you! 

&lt;&lt;button &quot;Back&quot; &quot;menu&quot;&gt;&gt;&lt;&lt;/button&gt;&gt;</tw-passagedata></tw-storydata>